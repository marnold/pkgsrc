$NetBSD: patch-ab,v 1.1.1.1 2001/05/23 15:47:45 agc Exp $

--- zapres.c.orig	Fri Sep 13 20:52:50 1996
+++ zapres.c	Sat May 12 23:26:01 2001
@@ -17,8 +17,9 @@
 
 #include <stdio.h>
 #include <stdlib.h>
-#include <dir.h>
+#include <sys/dir.h>
 #include <string.h>
+#include "compat.h"
 
 int backup(FILE *f,char *oldname)
 {
@@ -31,7 +32,7 @@
     int result=0;
 
     _splitpath(oldname,drive,dir,fname,ext);
-    _makepath(path,drive,dir,fname,".BAK");
+    _makepath(path,drive,dir,fname,".bak");
     bak=fopen(path,"wb");
     if(bak)
     {
@@ -102,7 +103,7 @@
     else for(i=1;i<b;i++)
     {
 	_splitpath(argv[i],drive,dir,fname,ext);
-	if(!ext[0]) strcpy(ext,".BMP");
+	if(!ext[0]) strcpy(ext,".bmp");
 	_makepath(path,drive,dir,fname,ext);
 	f=fopen(path,"r+b");
 	if(f)
