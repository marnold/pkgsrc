$NetBSD: patch-aa,v 1.1.1.1 2001/06/17 14:36:42 jtb Exp $

--- Makefile.orig	Fri May  5 07:52:04 2000
+++ Makefile
@@ -1,12 +1,16 @@
 ################## Configuration parameters
 # Compile using ocamlopt, to use ocamlc set TARGET=byte
+.if (${MACHINE_ARCH} == "i386")
 TARGET=opt
+.else
+TARGET=byte
+.endif
 # Library directory of hevea
-LIBDIR=/usr/local/lib/hevea
+LIBDIR=${PREFIX}/share/hevea
 # Where to install programms
-BINDIR=/usr/local/bin
+BINDIR=${PREFIX}/bin
 # A replacement for /lib/cpp
-CPP=gcc -E -P -x c 
+#CPP=gcc -E -P -x c 
 ############### End of configuration parameters
 
 HEVEA=./hevea.$(TARGET)
@@ -14,7 +18,7 @@
 OCAMLCI=ocamlc
 OCAMLOPT=ocamlopt
 OCAMLLEX=ocamllex
-INSTALL=cp
+INSTALL=$(BSD_INSTALL_DATA)
 OBJS=version.cmo stack.cmo location.cmo misc.cmo out.cmo table.cmo parse_opts.cmo mylib.cmo myfiles.cmo symb.cmo save.cmo auxx.cmo  lexstate.cmo subst.cmo latexmacros.cmo counter.cmo noimage.cmo image.cmo length.cmo  get.cmo tabular.cmo htmlCommon.cmo htmlMath.cmo mathML.cmo html.cmo  text.cmo infoRef.cmo info.cmo section.cmo foot.cmo entry.cmo index.cmo colscan.cmo color.cmo hot.cmo package.cmo videoc.cmo verb.cmo latexscan.cmo zyva.cmo latexmain.cmo
 OBJSCUT=version.cmo stack.cmo location.cmo misc.cmo  out.cmo thread.cmo cross.cmo mylib.cmo section.cmo length.cmo save.cmo cut.cmo cutmain.cmo
 GENSRC=colscan.ml cut.ml entry.ml get.ml latexscan.ml length.ml save.ml tabular.ml videoc.ml verb.ml infoRef.ml subst.ml
@@ -36,28 +40,28 @@
 	$(MAKE) $(MFLAGS) TARGET=byte hevea.byte hacha.byte cutfoot-fra.html cutfoot-eng.html
 
 install-lib:
-	-mkdir $(LIBDIR)
-	$(INSTALL) hevea.sty cutfoot-fra.html cutfoot-eng.html footer.tex ${LIBDIR}
-	$(INSTALL) contents_motif.gif next_motif.gif previous_motif.gif ${LIBDIR}
-	$(INSTALL) $(ALLLIB) $(LIBDIR)
-	-mkdir $(LIBDIR)/html
-	cd html ; $(INSTALL) $(HTMLLIB) $(LIBDIR)/html
-	-mkdir $(LIBDIR)/text
-	cd text ; $(INSTALL) $(TEXTLIB) $(LIBDIR)/text
-	-mkdir $(LIBDIR)/info
-	cd info ; $(INSTALL) $(INFOLIB) $(LIBDIR)/info
+	$(BSD_INSTALL_DATA_DIR) $(LIBDIR)
+	$(BSD_INSTALL_DATA) hevea.sty cutfoot-fra.html cutfoot-eng.html footer.tex ${LIBDIR}
+	$(BSD_INSTALL_DATA) contents_motif.gif next_motif.gif previous_motif.gif ${LIBDIR}
+	$(BSD_INSTALL_DATA) $(ALLLIB) $(LIBDIR)
+	$(BSD_INSTALL_DATA_DIR) $(LIBDIR)/html
+	cd html ; $(BSD_INSTALL_DATA) $(HTMLLIB) $(LIBDIR)/html
+	$(BSD_INSTALL_DATA_DIR) $(LIBDIR)/text
+	cd text ; $(BSD_INSTALL_DATA) $(TEXTLIB) $(LIBDIR)/text
+	$(BSD_INSTALL_DATA_DIR) $(LIBDIR)/info
+	cd info ; $(BSD_INSTALL_DATA) $(INFOLIB) $(LIBDIR)/info
 
 
 
 install-opt: install-lib
-	$(INSTALL) hevea.opt $(BINDIR)/hevea
-	$(INSTALL) hacha.opt $(BINDIR)/hacha
-	$(INSTALL) imagen $(BINDIR)
+	$(BSD_INSTALL_PROGRAM) hevea.opt $(BINDIR)/hevea
+	$(BSD_INSTALL_PROGRAM) hacha.opt $(BINDIR)/hacha
+	$(BSD_INSTALL_SCRIPT) imagen $(BINDIR)
 
 install-byte: install-lib
-	$(INSTALL) hevea.byte $(BINDIR)/hevea
-	$(INSTALL) hacha.byte $(BINDIR)/hacha
-	$(INSTALL) imagen $(BINDIR)
+	$(BSD_INSTALL_SCRIPT) hevea.byte $(BINDIR)/hevea
+	$(BSD_INSTALL_SCRIPT) hacha.byte $(BINDIR)/hacha
+	$(BSD_INSTALL_SCRIPT) imagen $(BINDIR)
 
 
 hevea.byte: ${OBJS}
