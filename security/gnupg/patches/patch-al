$NetBSD: patch-al,v 1.1.2.2 2006/11/28 08:21:42 ghen Exp $

# http://lists.gnupg.org/pipermail/gnupg-announce/2006q4/000241.html

--- ./g10/openfile.c.orig	2006-09-14 08:18:39.000000000 -0600
+++ ./g10/openfile.c
@@ -145,7 +145,7 @@ ask_outfile_name( const char *name, size
 
     s = _("Enter new filename");
 
-    n = strlen(s) + namelen + 10;
+    n = strlen(s) + (defname?strlen (defname):0) + 10;
     defname = name && namelen? make_printable_string( name, namelen, 0): NULL;
     prompt = xmalloc(n);
     if( defname )
