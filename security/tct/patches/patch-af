$NetBSD: patch-af,v 1.1.1.1 2002/01/03 10:58:57 agc Exp $

--- src/fstools/ffs.c	2002/01/03 09:39:06	1.1
+++ src/fstools/ffs.c	2002/01/03 09:44:41
@@ -193,7 +193,12 @@
 	cg_num = INO_TO_CG(ffs->fs, inum);
 	if (cg == 0 || cg->cg_cgx != cg_num) {
 	    cg = ffs_cgroup_lookup(ffs, cg_num);
+#ifdef NETBSD1
+	    /* BYTE_SWAPPED filesystems can come later */
+	    inosused = (unsigned char *) cg_inosused(cg, 0);
+#else
 	    inosused = (unsigned char *) cg_inosused(cg);
+#endif
 	    ibase = cg_num * ffs->fs->fs_ipg;
 	}
 
@@ -290,7 +295,12 @@
 	cg_num = dtog(ffs->fs, addr);
 	if (cg == 0 || cg->cg_cgx != cg_num) {
 	    cg = ffs_cgroup_lookup(ffs, cg_num);
+#ifdef NETBSD1
+	    /* BYTE_SWAPPED filesystems can come later */
+	    freeblocks = (unsigned char *) cg_blksfree(cg, 0);
+#else
 	    freeblocks = (unsigned char *) cg_blksfree(cg);
+#endif
 	    dbase = cgbase(ffs->fs, cg_num);
 	    dmin = cgdmin(ffs->fs, cg_num);
 	    sblock = cgsblock(ffs->fs, cg_num);
