$NetBSD: patch-aa,v 1.1.1.1 2004/01/10 14:56:45 jlam Exp $

--- appl/ftp/ftp/gssapi.c.orig	Sun Mar 16 14:40:18 2003
+++ appl/ftp/ftp/gssapi.c
@@ -228,12 +228,13 @@ gss_adat(void *app_data, void *buf, size
 	    gss_release_buffer(&min_stat, &export_name);
 	    goto out;
 	}
-	name = realloc(export_name.value, export_name.length + 1);
+	name = malloc(export_name.length + 1);
 	if(name == NULL) {
 	    reply(500, "Out of memory");
 	    gss_release_buffer(&min_stat, &export_name);
 	    goto out;
 	}
+	memcpy(name, export_name.value, export_name.length);
 	name[export_name.length] = '\0';
 	gss_release_buffer(&min_stat, &export_name);
 	d->client_name = name;
