$NetBSD: patch-aa,v 1.1.1.1 2001/10/21 21:26:52 seb Exp $

--- Makefile.in.orig	Wed Jul  4 22:07:28 2001
+++ Makefile.in
@@ -76,10 +76,17 @@
 #IRCDLIBS=-lsocket -lnsl -lucb
 #IRCLIBS=-lcurses -lresolv -lsocket -lnsl -lucb
 
-
+INSTALL_PROGRAM = $(BSD_INSTALL_PROGRAM)
+INSTALL_PROGRAM_DIR = $(BSD_INSTALL_PROGRAM_DIR)
+INSTALL_DATA = $(BSD_INSTALL_DATA)
+INSTALL_DATA_DIR = $(BSD_INSTALL_DATA_DIR)
+INSTALL_MAN_DIR = $(BSD_INSTALL_MAN_DIR)
+INSTALL_MAN = $(BSD_INSTALL_MAN)
+INSTALL_SCRIPT_DIR = $(BSD_INSTALL_SCRIPT_DIR)
+INSTALL_SCRIPT = $(BSD_INSTALL_SCRIPT)
 
 SHELL=/bin/sh
-SUBDIRS=zlib src tools
+SUBDIRS=src tools
 # ZSUBDIRS=zlib $(SUBDIRS)
 
 MAKE = make ${MFLAGS} 'CFLAGS=${CFLAGS}' 'INSTALL=${INSTALL}' 'LDFLAGS=${LDFLAGS}'
@@ -137,5 +144,17 @@
 	done
 
 install: all
-	@./tools/install_ircd
-
+	$(INSTALL_PROGRAM_DIR) $(DESTDIR)$(SDIR)
+	$(INSTALL_PROGRAM) src/ircd $(DESTDIR)$(SPATH)
+	$(INSTALL_PROGRAM) tools/mkpasswd $(DESTDIR)$(SDIR)/ircd-hybrid-mkpasswd
+	$(INSTALL_PROGRAM) tools/viconf $(DESTDIR)$(SDIR)/ircd-hybrid-viconf
+	ln $(DESTDIR)$(SDIR)/ircd-hybrid-viconf $(DESTDIR)$(SDIR)/ircd-hybrid-viklines
+	ln $(DESTDIR)$(SDIR)/ircd-hybrid-viconf $(DESTDIR)$(SDIR)/ircd-hybrid-vimotd
+	$(INSTALL_PROGRAM) tools/fixklines $(DESTDIR)$(SDIR)/ircd-hybrid-fixklines
+	$(INSTALL_DATA_DIR) $(DESTDIR)$(PREFIX)/share/examples/ircd-hybrid
+	$(INSTALL_DATA) doc/example.conf $(DESTDIR)$(PREFIX)/share/examples/ircd-hybrid/ircd.conf
+	$(INSTALL_MAN_DIR) $(DESTDIR)$(PREFIX)/man/man8
+	$(INSTALL_MAN) doc/ircd.8 $(DESTDIR)$(PREFIX)/man/man8/ircd-hybrid.8
+	$(INSTALL_DATA) opers.txt $(DESTDIR)$(PREFIX)/share/examples/ircd-hybrid/opers.txt
+	$(INSTALL_SCRIPT_DIR) $(DESTDIR)$(PREFIX)/sbin
+	$(INSTALL_SCRIPT) tools/mkconf $(DESTDIR)$(PREFIX)/sbin/ircd-hybrid-mkconf
