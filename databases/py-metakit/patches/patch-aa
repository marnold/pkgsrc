$NetBSD: patch-aa,v 1.1.1.1 2002/12/04 18:48:09 drochner Exp $

--- ../unix/Makefile.in.orig	Sat Nov  2 23:29:13 2002
+++ ../unix/Makefile.in	Wed Dec  4 17:51:17 2002
@@ -34,8 +34,8 @@
 srcdir = @srcdir@
 top_builddir = .
 
-pyincludedir = @includedir@/python2.2
-pylibdir = @libdir@/python2.2/site-packages
+pyincludedir = ${PYINC}
+pylibdir = ${PYSITELIB}
 
 tclsh = tclsh
 tclincludedir = @TCL_INCLUDE_DIR@
@@ -71,7 +71,6 @@
 			-I$(tclincludedir)/generic \
 			-I$(tclincludedir)
 CXX_SWITCHES_PY   = $(CXXFLAGS) \
-			-I$(srcdir)/../include \
 			-I$(srcdir)/../python/scxx \
 			-I$(pyincludedir)
 CXX_SWITCHES_LUA  = $(CXXFLAGS) \
@@ -116,7 +115,7 @@
 
 install-python: Mk4py@SHLIB_SUFFIX@
 	$(INSTALL_PROGRAM) Mk4py@SHLIB_SUFFIX@ $(DESTDIR)$(pylibdir)
-	$(INSTALL_PROGRAM) $(srcdir)/../python/metakit.py $$(DESTDIR)(pylibdir)
+	$(INSTALL_DATA) $(srcdir)/../python/metakit.py $(DESTDIR)$(pylibdir)
 
 clean:
 	$L rm -f *.la *.o *.lo
@@ -153,9 +152,9 @@
 	cp .libs/libmk4py@SHLIB_SUFFIX@ $@
 	-strip $(STRIP_FLAGS) $@ 2>/dev/null
 
-libmk4py.la: $(PYOBJS) $(LIBOBJS)
+libmk4py.la: $(PYOBJS)
 	$L --mode=link $(CXX) -o $@ $(CXX_SWITCHES) $(LIBTOOL_FLAGS) -avoid-version \
-		-rpath $(libdir) $(SPYOBJS) $(SHLOBJS)
+		-rpath $(libdir) $(SPYOBJS) -L${prefix}/lib -lmk4
 
 Mk4lua@SHLIB_SUFFIX@: mk4lua.o libmk4.la
 	$(CXX) -o $@ $(CXX_SWITCHES) -shared mk4lua.lo $(SHLOBJS) \
