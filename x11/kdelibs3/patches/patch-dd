$NetBSD: patch-dd,v 1.1.2.3 2005/05/01 22:06:21 salo Exp $

--- kimgio/tiffr.cpp.orig	2004-06-23 05:36:40.000000000 +1200
+++ kimgio/tiffr.cpp
@@ -83,6 +83,10 @@ void kimgio_tiff_read( QImageIO *io )
             return;
 
 	QImage image( width, height, 32 );
+	if( image.isNull()) {
+		TIFFClose( tiff );
+		return;
+	}
 	data = (uint32 *)image.bits();
 
 	//Sven: changed to %ld for 64bit machines
