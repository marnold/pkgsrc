$NetBSD: patch-cs,v 1.1.1.1 2002/05/31 13:19:18 skrll Exp $

--- konsole/konsole/Makefile.am.orig	Wed May  8 19:22:37 2002
+++ konsole/konsole/Makefile.am
@@ -12,7 +12,8 @@
 
 # you can add here more. This one gets installed
 bin_PROGRAMS = 	konsole konsole_grantpty kwrited #kcmkonsole
-lib_LTLIBRARIES = libkonsolepart.la kwrited.la konsole.la
+lib_LTLIBRARIES = libkonsolepart.la libkwrited_main.la kwrited.la \
+	libkonsole_main.la konsole.la
 # libkonsolepart is a part, but konsole.la links directly to it, so we can't
 # install it under kde_module
 
@@ -32,24 +33,34 @@
 libkonsolepart_la_LIBADD = $(LIB_KPARTS) $(LIBUTIL) @XTESTLIB@
 
 # kwrited kdeinit module
-kwrited_la_SOURCES = kwrited.cpp
-kwrited_la_LIBADD  = libkonsolepart.la
+libkwrited_main_la_SOURCES = kwrited.cpp
+libkwrited_main_la_LIBADD  = libkonsolepart.la
+libkwrited_main_la_LDFLAGS = $(all_libraries)
+
+kwrited_la_SOURCES = kwrited_main.cpp
+kwrited_la_LIBADD  = libkwrited_main.la
 kwrited_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 # kwrited executable
-kwrited_SOURCES	= dummy.cpp
-kwrited_LDADD   = kwrited.la 
+kwrited_SOURCES	= kwrited_main.cpp
+kwrited_LDADD   = libkwrited_main.la 
 kwrited_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 # konsole kdeinit module
-konsole_la_SOURCES = main.cpp konsole.cpp
-konsole_la_LIBADD  = libkonsolepart.la
+libkonsole_main_la_SOURCES = main.cpp konsole.cpp
+libkonsole_main_la_LIBADD  = libkonsolepart.la
+libkonsole_main_la_LDFLAGS = $(all_libraries)
+
+konsole_la_SOURCES = konsole_main.cpp
+konsole_la_LIBADD  = libkonsole_main.la
 konsole_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 # konsole executable - has all the sources, doesn't link kparts, saves startup time
-konsole_SOURCES	= TEPty.cpp BlockArray.cpp main.cpp konsole.cpp schema.cpp session.cpp TEWidget.cpp TEmuVt102.cpp \
-                  TEScreen.cpp TEmulation.cpp TEHistory.cpp keytrans.cpp konsoleiface.skel sessioniface.skel \
-                  konsole_wcwidth.cpp
+konsole_SOURCES	= TEPty.cpp BlockArray.cpp main.cpp konsole.cpp schema.cpp \
+	session.cpp TEWidget.cpp TEmuVt102.cpp TEScreen.cpp TEmulation.cpp \
+	TEHistory.cpp keytrans.cpp konsoleiface.skel sessioniface.skel \
+	konsole_wcwidth.cpp konsole_main.cpp
+
 konsole_LDADD = $(LIB_KDEUI) $(LIB_KSYCOCA) $(LIBUTIL) $(LIB_KFILE) @XTESTLIB@
 konsole_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
@@ -91,9 +102,6 @@
 	$(XGETTEXT) rc.cpp *.cpp -o $(podir)/konsole.pot
 	rm -f schemas.cpp
 	rm -f tips.cpp
-
-dummy.cpp:
-	echo > dummy.cpp
 
 konsole.lo: konsole.o
 
