$NetBSD: patch-ac,v 1.1.1.1.2.2 2002/06/23 19:05:13 jlam Exp $

--- kate/app/Makefile.in.orig	Mon May 13 23:57:35 2002
+++ kate/app/Makefile.in
@@ -287,35 +287,45 @@
 x_includes = @x_includes@
 x_libraries = @x_libraries@
 
-lib_LTLIBRARIES = kate.la kwrite.la
+lib_LTLIBRARIES = libkate_main.la kate.la libkwrite_main.la kwrite.la
 bin_PROGRAMS = kate kwrite
 
-#>- kate_la_SOURCES = kateapp.cpp kateconfigdialog.cpp kateconfigplugindialogpage.cpp \
-#>- kateconsole.cpp katedocmanager.cpp katefilelist.cpp katefileselector.cpp \
-#>- katemainwindow.cpp katepluginmanager.cpp katesplitter.cpp \
-#>- kateviewmanager.cpp kateviewspace.cpp katemain.cpp \
-#>- kateappIface.skel kateIface.skel kategrepdialog.cpp katefiledialog.cpp
-#>+ 5
-kate_la_SOURCES=kateapp.cpp kateconfigdialog.cpp kateconfigplugindialogpage.cpp \
-	kateconsole.cpp katedocmanager.cpp katefilelist.cpp katefileselector.cpp \
-	katemainwindow.cpp katepluginmanager.cpp katesplitter.cpp \
-	kateviewmanager.cpp kateviewspace.cpp katemain.cpp \
-	  kategrepdialog.cpp katefiledialog.cpp kateappIface_skel.cpp kateIface_skel.cpp
+#>- libkate_main_la_SOURCES = kateapp.cpp kateconfigdialog.cpp \
+#>- kateconfigplugindialogpage.cpp kateconsole.cpp katedocmanager.cpp \
+#>- katefilelist.cpp katefileselector.cpp katemainwindow.cpp \
+#>- katepluginmanager.cpp katesplitter.cpp kateviewmanager.cpp \
+#>- kateviewspace.cpp katemain.cpp kateappIface.skel kateIface.skel \
+#>- kategrepdialog.cpp katefiledialog.cpp
+#>+ 6
+libkate_main_la_SOURCES=kateapp.cpp kateconfigdialog.cpp \
+	kateconfigplugindialogpage.cpp kateconsole.cpp katedocmanager.cpp \
+	katefilelist.cpp katefileselector.cpp katemainwindow.cpp \
+	katepluginmanager.cpp katesplitter.cpp kateviewmanager.cpp \
+	kateviewspace.cpp katemain.cpp   \
+	kategrepdialog.cpp katefiledialog.cpp kateappIface_skel.cpp kateIface_skel.cpp
+
 
+libkate_main_la_LIBADD = ../interfaces/libkateinterfaces.la -lkscript
+libkate_main_la_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
-kate_la_LIBADD = ../interfaces/libkateinterfaces.la -lkscript
+kate_la_SOURCES = dummy_main.cpp
+kate_la_LIBADD = libkate_main.la
 kate_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
 
-kwrite_la_SOURCES = kwritemain.cpp katefiledialog.cpp
-kwrite_la_LIBADD = ../interfaces/libkateinterfaces.la
+libkwrite_main_la_SOURCES = kwritemain.cpp katefiledialog.cpp
+libkwrite_main_la_LIBADD = ../interfaces/libkateinterfaces.la
+libkwrite_main_la_LDFLAGS = $(all_libraries) $(KDE_RPATH)
+
+kwrite_la_SOURCES = dummy_main.cpp
+kwrite_la_LIBADD = libkwrite_main.la
 kwrite_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
 
-kate_SOURCES = dummy.cpp
-kate_LDADD = kate.la
+kate_SOURCES = dummy_main.cpp
+kate_LDADD = libkate_main.la
 kate_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
-kwrite_SOURCES = dummy.cpp
-kwrite_LDADD = kwrite.la
+kwrite_SOURCES = dummy_main.cpp
+kwrite_LDADD = libkwrite_main.la
 kwrite_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
 INCLUDES = -DKATEPART_NOT_INSTALLED -I../interfaces $(all_includes)
@@ -327,47 +337,57 @@
 CONFIG_CLEAN_FILES =
 LTLIBRARIES = $(lib_LTLIBRARIES)
 
-kate_la_DEPENDENCIES = ../interfaces/libkateinterfaces.la
-am_kate_la_OBJECTS = kateapp.lo kateconfigdialog.lo \
+kate_la_DEPENDENCIES = libkate_main.la
+am_kate_la_OBJECTS = dummy_main.lo
+#>- kate_la_OBJECTS = $(am_kate_la_OBJECTS)
+#>+ 1
+kate_la_OBJECTS = dummy_main.lo
+kwrite_la_DEPENDENCIES = libkwrite_main.la
+am_kwrite_la_OBJECTS = dummy_main.lo
+#>- kwrite_la_OBJECTS = $(am_kwrite_la_OBJECTS)
+#>+ 1
+kwrite_la_OBJECTS = dummy_main.lo
+libkate_main_la_DEPENDENCIES = ../interfaces/libkateinterfaces.la
+am_libkate_main_la_OBJECTS = kateapp.lo kateconfigdialog.lo \
 	kateconfigplugindialogpage.lo kateconsole.lo katedocmanager.lo \
 	katefilelist.lo katefileselector.lo katemainwindow.lo \
 	katepluginmanager.lo katesplitter.lo kateviewmanager.lo \
 	kateviewspace.lo katemain.lo kategrepdialog.lo \
 	katefiledialog.lo
-#>- kate_la_OBJECTS = $(am_kate_la_OBJECTS)
+#>- libkate_main_la_OBJECTS = $(am_libkate_main_la_OBJECTS)
 #>+ 10
-kate_la_final_OBJECTS = kate_la.all_cpp.lo 
-kate_la_nofinal_OBJECTS = kateapp.lo kateconfigdialog.lo \
+libkate_main_la_final_OBJECTS = libkate_main_la.all_cpp.lo 
+libkate_main_la_nofinal_OBJECTS = kateapp.lo kateconfigdialog.lo \
 	kateconfigplugindialogpage.lo kateconsole.lo katedocmanager.lo \
 	katefilelist.lo katefileselector.lo katemainwindow.lo \
 	katepluginmanager.lo katesplitter.lo kateviewmanager.lo \
 	kateviewspace.lo katemain.lo kategrepdialog.lo \
 	katefiledialog.lo kateappIface_skel.lo kateIface_skel.lo \
-	kate_la_meta_unload.lo 
-@KDE_USE_FINAL_FALSE@kate_la_OBJECTS = $(kate_la_nofinal_OBJECTS)
-@KDE_USE_FINAL_TRUE@kate_la_OBJECTS = $(kate_la_final_OBJECTS)
-kwrite_la_DEPENDENCIES = ../interfaces/libkateinterfaces.la
-am_kwrite_la_OBJECTS = kwritemain.lo katefiledialog.lo
-#>- kwrite_la_OBJECTS = $(am_kwrite_la_OBJECTS)
+	libkate_main_la_meta_unload.lo 
+@KDE_USE_FINAL_FALSE@libkate_main_la_OBJECTS = $(libkate_main_la_nofinal_OBJECTS)
+@KDE_USE_FINAL_TRUE@libkate_main_la_OBJECTS = $(libkate_main_la_final_OBJECTS)
+libkwrite_main_la_DEPENDENCIES = ../interfaces/libkateinterfaces.la
+am_libkwrite_main_la_OBJECTS = kwritemain.lo katefiledialog.lo
+#>- libkwrite_main_la_OBJECTS = $(am_libkwrite_main_la_OBJECTS)
 #>+ 5
-kwrite_la_final_OBJECTS = kwrite_la.all_cpp.lo 
-kwrite_la_nofinal_OBJECTS = kwritemain.lo katefiledialog.lo \
-	kwrite_la_meta_unload.lo 
-@KDE_USE_FINAL_FALSE@kwrite_la_OBJECTS = $(kwrite_la_nofinal_OBJECTS)
-@KDE_USE_FINAL_TRUE@kwrite_la_OBJECTS = $(kwrite_la_final_OBJECTS)
+libkwrite_main_la_final_OBJECTS = libkwrite_main_la.all_cpp.lo 
+libkwrite_main_la_nofinal_OBJECTS = kwritemain.lo katefiledialog.lo \
+	libkwrite_main_la_meta_unload.lo 
+@KDE_USE_FINAL_FALSE@libkwrite_main_la_OBJECTS = $(libkwrite_main_la_nofinal_OBJECTS)
+@KDE_USE_FINAL_TRUE@libkwrite_main_la_OBJECTS = $(libkwrite_main_la_final_OBJECTS)
 bin_PROGRAMS = kate$(EXEEXT) kwrite$(EXEEXT)
 PROGRAMS = $(bin_PROGRAMS)
 
-am_kate_OBJECTS = dummy.$(OBJEXT)
+am_kate_OBJECTS = dummy_main.$(OBJEXT)
 #>- kate_OBJECTS = $(am_kate_OBJECTS)
 #>+ 1
-kate_OBJECTS = dummy.$(OBJEXT)
-kate_DEPENDENCIES = kate.la
-am_kwrite_OBJECTS = dummy.$(OBJEXT)
+kate_OBJECTS = dummy_main.$(OBJEXT)
+kate_DEPENDENCIES = libkate_main.la
+am_kwrite_OBJECTS = dummy_main.$(OBJEXT)
 #>- kwrite_OBJECTS = $(am_kwrite_OBJECTS)
 #>+ 1
-kwrite_OBJECTS = dummy.$(OBJEXT)
-kwrite_DEPENDENCIES = kwrite.la
+kwrite_OBJECTS = dummy_main.$(OBJEXT)
+kwrite_DEPENDENCIES = libkwrite_main.la
 
 DEFS = @DEFS@
 DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)
@@ -375,7 +395,8 @@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
 depcomp = $(SHELL) $(top_srcdir)/admin/depcomp
-@AMDEP_TRUE@DEP_FILES = $(DEPDIR)/dummy.Po $(DEPDIR)/kateapp.Plo \
+@AMDEP_TRUE@DEP_FILES = $(DEPDIR)/dummy_main.Plo $(DEPDIR)/dummy_main.Po \
+	@AMDEP_TRUE@	$(DEPDIR)/kateapp.Plo \
 	@AMDEP_TRUE@	$(DEPDIR)/kateconfigdialog.Plo \
 	@AMDEP_TRUE@	$(DEPDIR)/kateconfigplugindialogpage.Plo \
 	@AMDEP_TRUE@	$(DEPDIR)/kateconsole.Plo \
@@ -409,10 +430,11 @@
 CXXLINK = $(LIBTOOL) --mode=link --tag=CXX $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(KDE_CXXFLAGS) \
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@
 CXXFLAGS = @CXXFLAGS@
-DIST_SOURCES = $(kate_la_SOURCES) $(kwrite_la_SOURCES) $(kate_SOURCES) \
-	$(kwrite_SOURCES)
+DIST_SOURCES = $(kate_la_SOURCES) $(kwrite_la_SOURCES) \
+	$(libkate_main_la_SOURCES) $(libkwrite_main_la_SOURCES) \
+	$(kate_SOURCES) $(kwrite_SOURCES)
 DIST_COMMON = Makefile.am Makefile.in
-SOURCES = $(kate_la_SOURCES) $(kwrite_la_SOURCES) $(kate_SOURCES) $(kwrite_SOURCES)
+SOURCES = $(kate_la_SOURCES) $(kwrite_la_SOURCES) $(libkate_main_la_SOURCES) $(libkwrite_main_la_SOURCES) $(kate_SOURCES) $(kwrite_SOURCES)
 
 #>- all: all-am
 #>+ 1
@@ -463,6 +485,10 @@
 	$(CXXLINK) -rpath $(libdir) $(kate_la_LDFLAGS) $(kate_la_OBJECTS) $(kate_la_LIBADD) $(LIBS)
 kwrite.la: $(kwrite_la_OBJECTS) $(kwrite_la_DEPENDENCIES) 
 	$(CXXLINK) -rpath $(libdir) $(kwrite_la_LDFLAGS) $(kwrite_la_OBJECTS) $(kwrite_la_LIBADD) $(LIBS)
+libkate_main.la: $(libkate_main_la_OBJECTS) $(libkate_main_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(libdir) $(libkate_main_la_LDFLAGS) $(libkate_main_la_OBJECTS) $(libkate_main_la_LIBADD) $(LIBS)
+libkwrite_main.la: $(libkwrite_main_la_OBJECTS) $(libkwrite_main_la_DEPENDENCIES) 
+	$(CXXLINK) -rpath $(libdir) $(libkwrite_main_la_LDFLAGS) $(libkwrite_main_la_OBJECTS) $(libkwrite_main_la_LIBADD) $(LIBS)
 install-binPROGRAMS: $(bin_PROGRAMS)
 	@$(NORMAL_INSTALL)
 	$(mkinstalldirs) $(DESTDIR)$(bindir)
@@ -500,7 +526,8 @@
 distclean-compile:
 	-rm -f *.tab.c
 
-@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/dummy.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/dummy_main.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/dummy_main.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/kateapp.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/kateconfigdialog.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/kateconfigplugindialogpage.Plo@am__quote@
@@ -575,7 +602,7 @@
 
 #>- DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 #>+ 4
-KDE_DIST=katemain.cpp katefileselector.h katemainwindow.cpp kateapp.h katefiledialog.h katesplitter.h kwritemain.h kategrepdialog.cpp kateconfigplugindialogpage.h kateappIface.h kateviewmanager.cpp katemain.h kateconfigdialog.h katefilelist.cpp katedocmanager.h kateIface.h kateviewspace.cpp kategrepdialog.h kateviewspace.h katesplitter.cpp katefileselector.cpp katepluginmanager.h kateconsole.h kateconsole.cpp katefilelist.h katemainwindow.h kateviewmanager.h katedocmanager.cpp katepluginmanager.cpp 
+KDE_DIST=katemain.cpp katefileselector.h kateIface.h katemainwindow.cpp kateviewspace.cpp kateapp.h katefiledialog.h katesplitter.h kwritemain.h kategrepdialog.cpp kateappIface.h kateconfigplugindialogpage.h kateviewmanager.cpp kategrepdialog.h kateviewspace.h katesplitter.cpp katemain.h katefilelist.cpp kateconfigdialog.h katefileselector.cpp katepluginmanager.h kateconsole.h kateconsole.cpp katefilelist.h katemainwindow.h kateviewmanager.h katedocmanager.cpp katedocmanager.h katepluginmanager.cpp kateconfigplugindialogpage.cpp 
 
 DISTFILES= $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST) $(KDE_DIST)
 
@@ -689,23 +716,10 @@
 	tags uninstall uninstall-am uninstall-binPROGRAMS \
 	uninstall-info-am uninstall-libLTLIBRARIES
 
-
-dummy.cpp:
-	echo > dummy.cpp
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
 
-#>+ 9
-kateappIface.kidl: $(srcdir)/kateappIface.h $(DCOPIDL_DEPENDENCIES)
-	$(DCOPIDL) $(srcdir)/kateappIface.h > kateappIface.kidl || ( rm -f kateappIface.kidl ; /bin/false )
-kateappIface_skel.cpp: kateappIface.kidl
-	$(DCOPIDL2CPP) --c++-suffix cpp --no-signals --no-stub kateappIface.kidl
-kateIface.kidl: $(srcdir)/kateIface.h $(DCOPIDL_DEPENDENCIES)
-	$(DCOPIDL) $(srcdir)/kateIface.h > kateIface.kidl || ( rm -f kateIface.kidl ; /bin/false )
-kateIface_skel.cpp: kateIface.kidl
-	$(DCOPIDL2CPP) --c++-suffix cpp --no-signals --no-stub kateIface.kidl
-
 #>+ 3
 kateviewmanager.moc: $(srcdir)/kateviewmanager.h
 	$(MOC) $(srcdir)/kateviewmanager.h -o kateviewmanager.moc
@@ -766,6 +780,16 @@
 katepluginmanager.moc: $(srcdir)/katepluginmanager.h
 	$(MOC) $(srcdir)/katepluginmanager.h -o katepluginmanager.moc
 
+#>+ 9
+kateappIface.kidl: $(srcdir)/kateappIface.h $(DCOPIDL_DEPENDENCIES)
+	$(DCOPIDL) $(srcdir)/kateappIface.h > kateappIface.kidl || ( rm -f kateappIface.kidl ; /bin/false )
+kateappIface_skel.cpp: kateappIface.kidl
+	$(DCOPIDL2CPP) --c++-suffix cpp --no-signals --no-stub kateappIface.kidl
+kateIface.kidl: $(srcdir)/kateIface.h $(DCOPIDL_DEPENDENCIES)
+	$(DCOPIDL) $(srcdir)/kateIface.h > kateIface.kidl || ( rm -f kateIface.kidl ; /bin/false )
+kateIface_skel.cpp: kateIface.kidl
+	$(DCOPIDL2CPP) --c++-suffix cpp --no-signals --no-stub kateIface.kidl
+
 #>+ 3
 clean-metasources:
 	-rm -f  kateviewmanager.moc katesplitter.moc katefileselector.moc katefilelist.moc kateconfigdialog.moc kateconfigplugindialogpage.moc katemainwindow.moc kateapp.moc kwritemain.moc kateviewspace.moc katefiledialog.moc katedocmanager.moc kategrepdialog.moc kateconsole.moc katepluginmanager.moc
@@ -787,41 +811,41 @@
 
 
 #>+ 12
-kate_la_meta_unload.cpp:  katefilelist.moc katefileselector.moc katesplitter.moc kateviewmanager.moc katemainwindow.moc kateconfigplugindialogpage.moc kateconfigdialog.moc kateapp.moc kateviewspace.moc katefiledialog.moc kateconsole.moc kategrepdialog.moc katedocmanager.moc katepluginmanager.moc
-	@echo 'creating kate_la_meta_unload.cpp'
-	@-rm -f kate_la_meta_unload.cpp
+libkate_main_la_meta_unload.cpp:  katefilelist.moc katefileselector.moc katesplitter.moc kateviewmanager.moc katemainwindow.moc kateconfigplugindialogpage.moc kateconfigdialog.moc kateapp.moc kateviewspace.moc katefiledialog.moc kateconsole.moc kategrepdialog.moc katedocmanager.moc katepluginmanager.moc
+	@echo 'creating libkate_main_la_meta_unload.cpp'
+	@-rm -f libkate_main_la_meta_unload.cpp
 	@if test ${kde_qtver} = 2; then \
-		echo 'static const char * _metalist_kate_la[] = {' > kate_la_meta_unload.cpp ;\
-		cat  katefilelist.moc katefileselector.moc katesplitter.moc kateviewmanager.moc katemainwindow.moc kateconfigplugindialogpage.moc kateconfigdialog.moc kateapp.moc kateviewspace.moc katefiledialog.moc kateconsole.moc kategrepdialog.moc katedocmanager.moc katepluginmanager.moc | grep 'char.*className' | sed -e 's/.*[^A-Za-z0-9_:]\([A-Za-z0-9_:]*\)::className.*$$/\"\1\",/' | sort | uniq >> kate_la_meta_unload.cpp ;\
-		echo '0};' >> kate_la_meta_unload.cpp ;\
-		echo '#include <kunload.h>' >> kate_la_meta_unload.cpp ;\
-		echo '_UNLOAD(kate_la)' >> kate_la_meta_unload.cpp ;\
-	else echo > kate_la_meta_unload.cpp; fi
+		echo 'static const char * _metalist_libkate_main_la[] = {' > libkate_main_la_meta_unload.cpp ;\
+		cat  katefilelist.moc katefileselector.moc katesplitter.moc kateviewmanager.moc katemainwindow.moc kateconfigplugindialogpage.moc kateconfigdialog.moc kateapp.moc kateviewspace.moc katefiledialog.moc kateconsole.moc kategrepdialog.moc katedocmanager.moc katepluginmanager.moc | grep 'char.*className' | sed -e 's/.*[^A-Za-z0-9_:]\([A-Za-z0-9_:]*\)::className.*$$/\"\1\",/' | sort | uniq >> libkate_main_la_meta_unload.cpp ;\
+		echo '0};' >> libkate_main_la_meta_unload.cpp ;\
+		echo '#include <kunload.h>' >> libkate_main_la_meta_unload.cpp ;\
+		echo '_UNLOAD(libkate_main_la)' >> libkate_main_la_meta_unload.cpp ;\
+	else echo > libkate_main_la_meta_unload.cpp; fi
 
 
 #>+ 12
-kwrite_la_meta_unload.cpp:  kwritemain.moc katefiledialog.moc
-	@echo 'creating kwrite_la_meta_unload.cpp'
-	@-rm -f kwrite_la_meta_unload.cpp
+libkwrite_main_la_meta_unload.cpp:  kwritemain.moc katefiledialog.moc
+	@echo 'creating libkwrite_main_la_meta_unload.cpp'
+	@-rm -f libkwrite_main_la_meta_unload.cpp
 	@if test ${kde_qtver} = 2; then \
-		echo 'static const char * _metalist_kwrite_la[] = {' > kwrite_la_meta_unload.cpp ;\
-		cat  kwritemain.moc katefiledialog.moc | grep 'char.*className' | sed -e 's/.*[^A-Za-z0-9_:]\([A-Za-z0-9_:]*\)::className.*$$/\"\1\",/' | sort | uniq >> kwrite_la_meta_unload.cpp ;\
-		echo '0};' >> kwrite_la_meta_unload.cpp ;\
-		echo '#include <kunload.h>' >> kwrite_la_meta_unload.cpp ;\
-		echo '_UNLOAD(kwrite_la)' >> kwrite_la_meta_unload.cpp ;\
-	else echo > kwrite_la_meta_unload.cpp; fi
+		echo 'static const char * _metalist_libkwrite_main_la[] = {' > libkwrite_main_la_meta_unload.cpp ;\
+		cat  kwritemain.moc katefiledialog.moc | grep 'char.*className' | sed -e 's/.*[^A-Za-z0-9_:]\([A-Za-z0-9_:]*\)::className.*$$/\"\1\",/' | sort | uniq >> libkwrite_main_la_meta_unload.cpp ;\
+		echo '0};' >> libkwrite_main_la_meta_unload.cpp ;\
+		echo '#include <kunload.h>' >> libkwrite_main_la_meta_unload.cpp ;\
+		echo '_UNLOAD(libkwrite_main_la)' >> libkwrite_main_la_meta_unload.cpp ;\
+	else echo > libkwrite_main_la_meta_unload.cpp; fi
 
 
 #>+ 3
 clean-moc-classes:
-	-rm -f  kate_la_meta_unload.cpp kwrite_la_meta_unload.cpp
+	-rm -f  libkate_main_la_meta_unload.cpp libkwrite_main_la_meta_unload.cpp
 
 #>+ 11
-kate_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/kateapp.cpp $(srcdir)/kateconfigdialog.cpp $(srcdir)/kateconfigplugindialogpage.cpp $(srcdir)/kateconsole.cpp $(srcdir)/katedocmanager.cpp $(srcdir)/katefilelist.cpp $(srcdir)/katefileselector.cpp $(srcdir)/katemainwindow.cpp $(srcdir)/katepluginmanager.cpp $(srcdir)/katesplitter.cpp $(srcdir)/kateviewmanager.cpp $(srcdir)/kateviewspace.cpp $(srcdir)/katemain.cpp $(srcdir)/kategrepdialog.cpp $(srcdir)/katefiledialog.cpp kateappIface_skel.cpp kateIface_skel.cpp kate_la_meta_unload.cpp   kateviewmanager.moc katesplitter.moc katefileselector.moc katefilelist.moc kateconfigdialog.moc kateconfigplugindialogpage.moc katemainwindow.moc kateapp.moc kwritemain.moc kateviewspace.moc katefiledialog.moc katedocmanager.moc kategrepdialog.moc kateconsole.moc katepluginmanager.moc 
+kate_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/dummy_main.cpp   kateviewmanager.moc katesplitter.moc katefileselector.moc katefilelist.moc kateconfigdialog.moc kateconfigplugindialogpage.moc katemainwindow.moc kateapp.moc kwritemain.moc kateviewspace.moc katefiledialog.moc katedocmanager.moc kategrepdialog.moc kateconsole.moc katepluginmanager.moc 
 	@echo 'creating kate_la.all_cpp.cpp ...'; \
 	rm -f kate_la.all_cpp.files kate_la.all_cpp.final; \
 	echo "#define KDE_USE_FINAL 1" >> kate_la.all_cpp.final; \
-	for file in kateapp.cpp kateconfigdialog.cpp kateconfigplugindialogpage.cpp kateconsole.cpp katedocmanager.cpp katefilelist.cpp katefileselector.cpp katemainwindow.cpp katepluginmanager.cpp katesplitter.cpp kateviewmanager.cpp kateviewspace.cpp katemain.cpp kategrepdialog.cpp katefiledialog.cpp kateappIface_skel.cpp kateIface_skel.cpp kate_la_meta_unload.cpp ; do \
+	for file in dummy_main.cpp ; do \
 	  echo "#include \"$$file\"" >> kate_la.all_cpp.files; \
 	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> kate_la.all_cpp.final; \
 	done; \
@@ -829,11 +853,11 @@
 	rm -f kate_la.all_cpp.final kate_la.all_cpp.files
 
 #>+ 11
-kwrite_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/kwritemain.cpp $(srcdir)/katefiledialog.cpp kwrite_la_meta_unload.cpp  
+kwrite_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/dummy_main.cpp  
 	@echo 'creating kwrite_la.all_cpp.cpp ...'; \
 	rm -f kwrite_la.all_cpp.files kwrite_la.all_cpp.final; \
 	echo "#define KDE_USE_FINAL 1" >> kwrite_la.all_cpp.final; \
-	for file in kwritemain.cpp katefiledialog.cpp kwrite_la_meta_unload.cpp ; do \
+	for file in dummy_main.cpp ; do \
 	  echo "#include \"$$file\"" >> kwrite_la.all_cpp.files; \
 	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> kwrite_la.all_cpp.final; \
 	done; \
@@ -841,11 +865,35 @@
 	rm -f kwrite_la.all_cpp.final kwrite_la.all_cpp.files
 
 #>+ 11
-kate.all_cpp.cpp: $(srcdir)/Makefile.in dummy.cpp  
+libkate_main_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/kateapp.cpp $(srcdir)/kateconfigdialog.cpp $(srcdir)/kateconfigplugindialogpage.cpp $(srcdir)/kateconsole.cpp $(srcdir)/katedocmanager.cpp $(srcdir)/katefilelist.cpp $(srcdir)/katefileselector.cpp $(srcdir)/katemainwindow.cpp $(srcdir)/katepluginmanager.cpp $(srcdir)/katesplitter.cpp $(srcdir)/kateviewmanager.cpp $(srcdir)/kateviewspace.cpp $(srcdir)/katemain.cpp $(srcdir)/kategrepdialog.cpp $(srcdir)/katefiledialog.cpp kateappIface_skel.cpp kateIface_skel.cpp libkate_main_la_meta_unload.cpp  
+	@echo 'creating libkate_main_la.all_cpp.cpp ...'; \
+	rm -f libkate_main_la.all_cpp.files libkate_main_la.all_cpp.final; \
+	echo "#define KDE_USE_FINAL 1" >> libkate_main_la.all_cpp.final; \
+	for file in kateapp.cpp kateconfigdialog.cpp kateconfigplugindialogpage.cpp kateconsole.cpp katedocmanager.cpp katefilelist.cpp katefileselector.cpp katemainwindow.cpp katepluginmanager.cpp katesplitter.cpp kateviewmanager.cpp kateviewspace.cpp katemain.cpp kategrepdialog.cpp katefiledialog.cpp kateappIface_skel.cpp kateIface_skel.cpp libkate_main_la_meta_unload.cpp ; do \
+	  echo "#include \"$$file\"" >> libkate_main_la.all_cpp.files; \
+	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> libkate_main_la.all_cpp.final; \
+	done; \
+	cat libkate_main_la.all_cpp.final libkate_main_la.all_cpp.files  > libkate_main_la.all_cpp.cpp; \
+	rm -f libkate_main_la.all_cpp.final libkate_main_la.all_cpp.files
+
+#>+ 11
+libkwrite_main_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/kwritemain.cpp $(srcdir)/katefiledialog.cpp libkwrite_main_la_meta_unload.cpp  
+	@echo 'creating libkwrite_main_la.all_cpp.cpp ...'; \
+	rm -f libkwrite_main_la.all_cpp.files libkwrite_main_la.all_cpp.final; \
+	echo "#define KDE_USE_FINAL 1" >> libkwrite_main_la.all_cpp.final; \
+	for file in kwritemain.cpp katefiledialog.cpp libkwrite_main_la_meta_unload.cpp ; do \
+	  echo "#include \"$$file\"" >> libkwrite_main_la.all_cpp.files; \
+	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> libkwrite_main_la.all_cpp.final; \
+	done; \
+	cat libkwrite_main_la.all_cpp.final libkwrite_main_la.all_cpp.files  > libkwrite_main_la.all_cpp.cpp; \
+	rm -f libkwrite_main_la.all_cpp.final libkwrite_main_la.all_cpp.files
+
+#>+ 11
+kate.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/dummy_main.cpp  
 	@echo 'creating kate.all_cpp.cpp ...'; \
 	rm -f kate.all_cpp.files kate.all_cpp.final; \
 	echo "#define KDE_USE_FINAL 1" >> kate.all_cpp.final; \
-	for file in dummy.cpp ; do \
+	for file in dummy_main.cpp ; do \
 	  echo "#include \"$$file\"" >> kate.all_cpp.files; \
 	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> kate.all_cpp.final; \
 	done; \
@@ -853,11 +901,11 @@
 	rm -f kate.all_cpp.final kate.all_cpp.files
 
 #>+ 11
-kwrite.all_cpp.cpp: $(srcdir)/Makefile.in dummy.cpp  
+kwrite.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/dummy_main.cpp  
 	@echo 'creating kwrite.all_cpp.cpp ...'; \
 	rm -f kwrite.all_cpp.files kwrite.all_cpp.final; \
 	echo "#define KDE_USE_FINAL 1" >> kwrite.all_cpp.final; \
-	for file in dummy.cpp ; do \
+	for file in dummy_main.cpp ; do \
 	  echo "#include \"$$file\"" >> kwrite.all_cpp.files; \
 	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> kwrite.all_cpp.final; \
 	done; \
@@ -866,20 +914,20 @@
 
 #>+ 3
 clean-final:
-	-rm -f kate_la.all_cpp.cpp kwrite_la.all_cpp.cpp kate.all_cpp.cpp kwrite.all_cpp.cpp
+	-rm -f kate_la.all_cpp.cpp kwrite_la.all_cpp.cpp libkate_main_la.all_cpp.cpp libkwrite_main_la.all_cpp.cpp kate.all_cpp.cpp kwrite.all_cpp.cpp
 
 #>+ 2
 final:
-	$(MAKE) kate_la_OBJECTS="$(kate_la_final_OBJECTS)" kwrite_la_OBJECTS="$(kwrite_la_final_OBJECTS)" all-am
+	$(MAKE) libkate_main_la_OBJECTS="$(libkate_main_la_final_OBJECTS)" libkwrite_main_la_OBJECTS="$(libkwrite_main_la_final_OBJECTS)" all-am
 #>+ 2
 final-install:
-	$(MAKE) kate_la_OBJECTS="$(kate_la_final_OBJECTS)" kwrite_la_OBJECTS="$(kwrite_la_final_OBJECTS)" install-am
+	$(MAKE) libkate_main_la_OBJECTS="$(libkate_main_la_final_OBJECTS)" libkwrite_main_la_OBJECTS="$(libkwrite_main_la_final_OBJECTS)" install-am
 #>+ 2
 no-final:
-	$(MAKE) kate_la_OBJECTS="$(kate_la_nofinal_OBJECTS)" kwrite_la_OBJECTS="$(kwrite_la_nofinal_OBJECTS)" all-am
+	$(MAKE) libkate_main_la_OBJECTS="$(libkate_main_la_nofinal_OBJECTS)" libkwrite_main_la_OBJECTS="$(libkwrite_main_la_nofinal_OBJECTS)" all-am
 #>+ 2
 no-final-install:
-	$(MAKE) kate_la_OBJECTS="$(kate_la_nofinal_OBJECTS)" kwrite_la_OBJECTS="$(kwrite_la_nofinal_OBJECTS)" install-am
+	$(MAKE) libkate_main_la_OBJECTS="$(libkate_main_la_nofinal_OBJECTS)" libkwrite_main_la_OBJECTS="$(libkwrite_main_la_nofinal_OBJECTS)" install-am
 #>+ 3
 cvs-clean:
 	$(MAKE) -f $(top_srcdir)/admin/Makefile.common cvs-clean
