$NetBSD: patch-cg,v 1.1.1.1.2.2 2002/06/23 19:05:39 jlam Exp $

--- konqueror/Makefile.am.orig	Wed May  8 19:22:28 2002
+++ konqueror/Makefile.am
@@ -5,7 +5,7 @@
 #SUBDIRS = . kfmexec client iconview dirtree listview keditbookmarks shellcmdplugin about pics sidebar
 SUBDIRS = . kfmexec client iconview listview keditbookmarks shellcmdplugin about pics sidebar
 
-lib_LTLIBRARIES = konqueror.la
+lib_LTLIBRARIES = libkonqueror_main.la konqueror.la
 
 konqdatadir = $(kde_datadir)/konqueror
 konqdata_DATA = konqueror.rc
@@ -22,7 +22,7 @@
 
 bin_PROGRAMS = konqueror
 
-konqueror_la_SOURCES = konq_main.cc \
+libkonqueror_main_la_SOURCES = konq_main.cc \
 	    KonquerorIface.cc KonquerorIface.skel \
 	    KonqMainWindowIface.cc KonqMainWindowIface.skel \
 	    KonqViewIface.cc KonqViewIface.skel \
@@ -37,11 +37,15 @@
 	    konq_browseriface.cc \
 	    delayedinitializer.cc
 
+libkonqueror_main_la_LDFLAGS = $(all_libraries) -module -avoid-version
+libkonqueror_main_la_LIBADD = ../libkonq/libkonq.la
+
+konqueror_la_SOURCES = konqueror_main.cc
 konqueror_la_LDFLAGS = $(all_libraries) -module -avoid-version
-konqueror_la_LIBADD = ../libkonq/libkonq.la
+konqueror_la_LIBADD = libkonqueror_main.la ../libkonq/libkonq.la
 
-konqueror_SOURCES = dummy.cc
-konqueror_LDADD = konqueror.la
+konqueror_SOURCES = konqueror_main.cc
+konqueror_LDADD = libkonqueror_main.la
 konqueror_LDFLAGS = $(KDE_RPATH) $(all_libraries)
 
 # Hmm, this experiment of a static konq failed, don't trust it...
@@ -55,9 +59,6 @@
 #konqueror_static_SOURCES = dummy.cc
 #konqueror_static_LDADD = konqueror.la *view/*.la dirtree/*.la $(libdir)/libkhtml.la
 #konqueror_static_LDFLAGS = $(all_libraries) -static
-
-dummy.cc:
-	echo > dummy.cc
 
 messages: rc.cpp
 	$(EXTRACTRC) *.rc */*.rc >> rc.cpp
