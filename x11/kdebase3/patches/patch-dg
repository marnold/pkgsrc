$NetBSD: patch-dg,v 1.1.1.1.2.2 2002/06/23 19:05:50 jlam Exp $

--- kwin/Makefile.am.orig	Wed May  8 19:23:01 2002
+++ kwin/Makefile.am
@@ -3,13 +3,17 @@
 SUBDIRS = . kcmkwin pics clients
 
 bin_PROGRAMS = kwin
-lib_LTLIBRARIES = kwin.la
+lib_LTLIBRARIES = libkwin.la kwin.la
 
 # workspace.cpp has to be first in order not to break --enable-final
-kwin_la_SOURCES = workspace.cpp atoms.cpp  client.cpp main.cpp \
+libkwin_la_SOURCES = workspace.cpp atoms.cpp  client.cpp main.cpp \
 	tabbox.cpp options.cpp plugins.cpp events.cpp KWinInterface.skel \
 	killwindow.cpp kwinbutton.cpp
-kwin_la_LIBADD = $(LIB_KDEUI) $(LIBXINERAMA)
+libkwin_la_LIBADD = $(LIB_KDEUI) $(LIBXINERAMA)
+libkwin_la_LDFLAGS = $(all_libraries)
+
+kwin_la_SOURCES = kwin_main.cpp
+kwin_la_LIBADD = libkwin.la
 kwin_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
 include_HEADERS = KWinInterface.h
@@ -18,7 +22,7 @@
 kwininclude_HEADERS = options.h client.h workspace.h kwinbutton.h
 
 kwin_SOURCES = kwin_main.cpp
-kwin_LDADD = kwin.la 
+kwin_LDADD = libkwin.la 
 kwin_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 KDE_ICON = kwin
@@ -34,7 +38,6 @@
 
 sounddir= $(kde_sounddir)
 sound_DATA = pop.wav
-
 update_DATA = kwin.upd pluginlibFix.pl
 updatedir = $(kde_datadir)/kconf_update
 
