$NetBSD: patch-ab,v 1.1.1.1 2004/01/26 11:48:04 jmmv Exp $

--- sys/oss/gstosssink.c.orig	2003-01-20 05:42:18.000000000 +1000
+++ sys/oss/gstosssink.c
@@ -256,7 +256,10 @@ gst_osssink_get_delay (GstOssSink *osssi
   if (osssink->common.fd == -1)
     return 0;
 
-  if (ioctl (osssink->common.fd, SNDCTL_DSP_GETODELAY, &delay) < 0) {
+#ifdef SNDCTL_DSP_GETODELAY
+  if (ioctl (osssink->common.fd, SNDCTL_DSP_GETODELAY, &delay) < 0)
+#endif
+  {
     audio_buf_info info;
     if (ioctl (osssink->common.fd, SNDCTL_DSP_GETOSPACE, &info) < 0) {
       delay = 0;
@@ -325,7 +328,7 @@ gst_osssink_chain (GstPad *pad, GstBuffe
 
     switch (GST_EVENT_TYPE (event)) {
       case GST_EVENT_EOS:
-        ioctl (osssink->common.fd, SNDCTL_DSP_SYNC);
+        ioctl (osssink->common.fd, SNDCTL_DSP_SYNC, NULL);
 	gst_oss_clock_set_active (osssink->provided_clock, FALSE);
 	gst_pad_event_default (pad, event);
         return;
@@ -336,7 +339,7 @@ gst_osssink_chain (GstPad *pad, GstBuffe
       {
 	gint64 value;
 
-        ioctl (osssink->common.fd, SNDCTL_DSP_RESET);
+        ioctl (osssink->common.fd, SNDCTL_DSP_RESET, NULL);
 	if (gst_event_discont_get_value (event, GST_FORMAT_TIME, &value)) {
           if (!gst_clock_handle_discont (osssink->clock, value))
 	    gst_oss_clock_set_active (osssink->provided_clock, FALSE);
