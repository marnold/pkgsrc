$NetBSD: patch-al,v 1.1.1.1 2004/01/26 15:11:49 jmmv Exp $

--- lib/loader/driver.c.orig	Mon Dec 18 02:07:13 2000
+++ lib/loader/driver.c
@@ -13,7 +13,7 @@
 #include <wine/vfw.h>
 #include <registry.h>
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
 #include <sys/time.h>
 #endif
 
@@ -38,7 +38,7 @@
 {
     DRVR* module=(DRVR*)hDriver;
     int result;
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
     struct itimerval itoval;
     struct itimerval itval;
 #endif
@@ -48,14 +48,14 @@
     if(module==0)return -1;
     if(module->hDriverModule==0)return -1;
     if(module->DriverProc==0)return -1;
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
     memset(&itval,0,sizeof(struct itimerval));
     setitimer(ITIMER_PROF ,&itval,&itoval);
 #endif
     STORE_ALL;
     result=module->DriverProc(module->dwDriverID,1,message,lParam1,lParam2);
     REST_ALL;
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
     setitimer(ITIMER_PROF,&itoval,NULL);
 #endif
 #ifdef DETAILED_OUT    
