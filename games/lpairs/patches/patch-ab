$NetBSD: patch-ab,v 1.1.1.1 2002/05/05 22:37:41 rh Exp $

--- configure.orig	Fri Apr 19 16:47:41 2002
+++ configure
@@ -1515,76 +1515,76 @@
   
   rm -f conf.sdltest
 
-
-ac_save_LIBS="$LIBS"
-thread_flag=""
-LIBS="$LIBS -pthread"
-cat > conftest.$ac_ext <<EOF
-#line 1524 "configure"
-#include "confdefs.h"
-#include <pthread.h>
-int main() {
- pthread_create((pthread_t*) 0,(pthread_attr_t*) 0, 0, 0); 
-; return 0; }
-EOF
-if { (eval echo configure:1531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  echo "$ac_t"""-pthread used..."" 1>&6
-        thread_flag="-pthread"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-          echo "$ac_t"""checking for -lpthread..."" 1>&6
-        LIBS="$ac_save_LIBS"
-        echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
-echo "configure:1542: checking for pthread_create in -lpthread" >&5
-ac_lib_var=`echo pthread'_'pthread_create | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpthread  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 1550 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char pthread_create();
-
-int main() {
-pthread_create()
-; return 0; }
-EOF
-if { (eval echo configure:1561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  thread_flag="-lpthread"
-		echo "$ac_t""yes" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: lib pthread is needed" 1>&2; exit 1; }
-        
-fi
-
-
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
+# unneeded
+#ac_save_LIBS="$LIBS"
+#thread_flag=""
+#LIBS="$LIBS -pthread"
+#cat > conftest.$ac_ext <<EOF
+##line 1524 "configure"
+##include "confdefs.h"
+##include <pthread.h>
+#int main() {
+# pthread_create((pthread_t*) 0,(pthread_attr_t*) 0, 0, 0); 
+#; return 0; }
+#EOF
+#if { (eval echo configure:1531: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+#  rm -rf conftest*
+#  echo "$ac_t"""-pthread used..."" 1>&6
+#        thread_flag="-pthread"
+#else
+#  echo "configure: failed program was:" >&5
+#  cat conftest.$ac_ext >&5
+#  rm -rf conftest*
+#          echo "$ac_t"""checking for -lpthread..."" 1>&6
+#        LIBS="$ac_save_LIBS"
+#        echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
+#echo "configure:1542: checking for pthread_create in -lpthread" >&5
+#ac_lib_var=`echo pthread'_'pthread_create | sed 'y%./+-%__p_%'`
+#if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+#  echo $ac_n "(cached) $ac_c" 1>&6
+#else
+#  ac_save_LIBS="$LIBS"
+#LIBS="-lpthread  $LIBS"
+#cat > conftest.$ac_ext <<EOF
+##line 1550 "configure"
+##include "confdefs.h"
+#/* Override any gcc2 internal prototype to avoid an error.  */
+#/* We use char because int might match the return type of a gcc2
+#    builtin and then its argument prototype would still apply.  */
+#char pthread_create();
+#
+#int main() {
+#pthread_create()
+#; return 0; }
+#EOF
+#if { (eval echo configure:1561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+#  rm -rf conftest*
+#  eval "ac_cv_lib_$ac_lib_var=yes"
+#else
+#  echo "configure: failed program was:" >&5
+#  cat conftest.$ac_ext >&5
+#  rm -rf conftest*
+#  eval "ac_cv_lib_$ac_lib_var=no"
+#fi
+#rm -f conftest*
+#LIBS="$ac_save_LIBS"
+#
+#fi
+#if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+#  echo "$ac_t""yes" 1>&6
+#  thread_flag="-lpthread"
+#		echo "$ac_t""yes" 1>&6
+#else
+#  echo "$ac_t""no" 1>&6
+#{ echo "configure: error: lib pthread is needed" 1>&2; exit 1; }
+#        
+#fi
+#
+#
+#fi
+#rm -f conftest*
+#LIBS="$ac_save_LIBS"
+#
 
 sound_flag="-DSOUND"
 # Check whether --enable-sound or --disable-sound was given.
