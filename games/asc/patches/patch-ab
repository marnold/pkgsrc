$NetBSD: patch-ab,v 1.1.1.1 2003/07/13 22:23:13 wiz Exp $

--- source/basestrm.cpp.orig	2003-06-04 18:18:54.000000000 +0200
+++ source/basestrm.cpp
@@ -2381,7 +2381,19 @@ void appendbackslash ( ASCString& string
 int createDirectory ( const char* name )
 {
    #ifdef _UNIX_
-    return mkdir ( name, 0700 );
+    char *nname;
+    int i;
+
+    if (name == NULL || (nname=strdup(name)) == NULL)
+	return -1;
+    i = strlen(nname);
+    /* leave one '/' */
+    while (i>1 && nname[i-1] == '/')
+		nname[--i] = '\0';
+    i = mkdir ( nname, 0700 );
+    free(nname);
+
+    return i;
    #else
     return mkdir ( name );
    #endif
