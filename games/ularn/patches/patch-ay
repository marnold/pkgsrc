$NetBSD: patch-ay,v 1.1.1.1 2001/04/27 15:27:31 agc Exp $

--- show.c.orig	Fri Jun 19 13:55:30 1992
+++ show.c	Sat Jan 13 21:55:39 2001
@@ -9,7 +9,7 @@
 
 	show character's inventory
  */
-showstr()
+void showstr(void)
 {
 	int i,number;
 
@@ -20,7 +20,7 @@
 	t_endup(number);
 }
 
-qshowstr()
+void qshowstr(void)
 {
 	int k;
 
@@ -44,7 +44,7 @@
 /*
  *	subroutine to clear screen depending on # lines to display
  */
-t_setup (count)
+void t_setup (count)
 int count;
 {
 	if (count<20)  {
@@ -53,14 +53,14 @@
 	}
 	else {
 		resetscroll(); 
-		clear();
+		ularn_clear();
 	}
 }
 
 /*
  *	subroutine to restore normal display screen depending on t_setup()
  */
-t_endup (count)
+void t_endup (count)
 int count;
 {
 	if (count<18)  /* how did we clear the screen? */
@@ -74,7 +74,7 @@
 /*
 	function to show the things player is wearing only
  */
-showwear()
+void showwear(void)
 {
 	int count, i,j;	
 
@@ -124,7 +124,7 @@
 /*
 	function to show the things player can wield only 
  */
-showwield()
+void showwield(void)
 {
 	int i,j,count;
 
@@ -182,7 +182,7 @@
 /*
  *	function to show the things player can read only
  */
-showread ()
+void showread (void)
 {
 	int i,j,count;
 
@@ -213,7 +213,7 @@
 /*
  *	function to show the things player can eat only
  */
-showeat ()
+void showeat (void)
 {
 	int i,j,count;
 
@@ -242,7 +242,7 @@
 /*
 	function to show the things player can quaff only
  */
-showquaff ()
+void showquaff (void)
 {
 	int i,j,count;
 
@@ -268,27 +268,26 @@
 	t_endup(count);
 }
 
-show1 (idx, str2)
+void show1 (idx, str2, known)
 int idx;
 char *str2[];
+int known;
 {
-	if (str2==0)
-		lprintf("\n%c)   %s",idx+'a',objectname[iven[idx]]);
-	else if (*str2[ivenarg[idx]]==0)  
+	if (str2 == 0 || known == 0)
 		lprintf("\n%c)   %s",idx+'a',objectname[iven[idx]]);
 	else 
-		lprintf("\n%c)   %s of%s",
+		lprintf("\n%c)   %s of %s",
 			idx+'a',objectname[iven[idx]],str2[ivenarg[idx]]);
 	if (wizard)
 		lprintf(" [ %d ]", ivenarg[idx]);
 }
 
-show3 (index)
+void show3 (index)
 int index;
 {
 	switch(iven[index]) {
-		case OPOTION:	show1(index,potionname);  break;
-		case OSCROLL:	show1(index,scrollname);  break;
+		case OPOTION:	show1(index,potionname,potionknown[index]);  break;
+		case OSCROLL:	show1(index,scrollname,scrollknown[index]);  break;
 		case OLARNEYE:		
 		case OBOOK:			
 		case OSPIRITSCARAB:
@@ -305,7 +304,7 @@
 		case OURN:
 		case OWWAND:
 		case OSPHTALISMAN:
-		case ONOTHEFT:		show1(index,(char **)0);  break;
+		case ONOTHEFT:		show1(index,(char **)0,0);  break;
 
 		default:	
 			lprintf("\n%c)   %s",index+'a',objectname[iven[index]]);
@@ -322,6 +321,6 @@
 	if (++srcount>=22) { 
 		srcount=0; 
 		more(); 
-		clear(); 
+		ularn_clear(); 
 	}
 }
