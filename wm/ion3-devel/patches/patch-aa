$NetBSD: patch-aa,v 1.1.1.1 2004/10/04 20:50:57 cube Exp $

--- configure.ac.orig	2004-09-06 20:28:34.000000000 +0200
+++ configure.ac
@@ -106,7 +106,7 @@ AC_ARG_ENABLE([sun-f1x-remap],
 			  [AS_HELP_STRING([--enable-sun-f1x-remap],
 							  [Remap F11 key to SunF36 and F12 to SunF37])])
 
-if test "x$enable_sun_f1x_remap" == xyes; then
+if test "x$enable_sun_f1x_remap" = xyes; then
 	_DCF_SUN_F1X_REMAP="1"
 fi
 
@@ -117,7 +117,18 @@ dnl DL_LIBS {{{
 AC_SUBST([DL_LIBS])
 
 AC_CHECK_HEADER([dlfcn.h], [], [exit 1])
-AC_CHECK_LIB([dl], [dlopen], [DL_LIBS="-ldl"], [exit 1])
+AC_CHECK_FUNCS([dlopen], [], [
+	AC_CHECK_LIB([dl], [dlopen], [DL_LIBS="-ldl"], [exit 1])])
+
+dnl }}}
+
+dnl INTL_LIBS {{{
+
+AC_SUBST([INTL_LIBS])
+
+AC_CHECK_HEADER([libintl.h], [], [exit 1])
+AC_CHECK_FUNCS([gettext], [], [
+	AC_CHECK_LIB([intl], [gettext], [INTL_LIBS="-lintl"], [exit 1])])
 
 dnl }}}
 
@@ -406,12 +417,13 @@ AC_ARG_ENABLE([locale],
 			  [AS_HELP_STRING([--disable-locale],
 							  [Disable locale support])])
 
-if test "x$enable_locale" == xno; then
+if test "x$enable_locale" = xno; then
 	_DCF_NO_LOCALE="-DCF_NO_LOCALE"
 fi
 
 dnl }}}
 
+AC_SUBST(PKGLOCALEDIR)
 
 AC_OUTPUT([system-ac.mk])
 
