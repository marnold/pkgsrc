$NetBSD: patch-ad,v 1.1.1.1 1998/10/07 13:11:35 agc Exp $

--- sysdeps/bsd/mem.c	1998/10/06 16:43:47	1.1
+++ sysdeps/bsd/mem.c	1998/10/06 16:48:51
@@ -116,11 +116,19 @@
 
 	/* convert memory stats to Kbytes */
 
+#ifdef __NetBSD__
+	buf->total = (u_int64_t) pagetok (vmm.v_kernel_pages) << LOG1024;
+#else
 	buf->total = (u_int64_t) pagetok (vmm.v_page_count) << LOG1024;
+#endif
 	buf->used = (u_int64_t) pagetok (vmm.v_active_count) << LOG1024;
 	buf->free = (u_int64_t) pagetok (vmm.v_free_count) << LOG1024;
 
+#ifdef __NetBSD__
+	buf->cached = (u_int64_t) pagetok (vmm.v_wire_count) << LOG1024;
+#else
 	buf->cached = (u_int64_t) pagetok (vmm.v_cache_count) << LOG1024;
+#endif
 	buf->shared = (u_int64_t) pagetok (vmt.t_vmshr) << LOG1024;
 
 	buf->buffer = (u_int64_t) bufspace;
