$NetBSD: patch-aa,v 1.1.1.1 2003/05/25 08:52:37 epg Exp $

--- configure.in.orig	Fri Nov 22 14:34:16 2002
+++ configure.in
@@ -344,6 +344,8 @@ AC_ARG_WITH(tclincl,[  --with-tclincl=pa
 AC_ARG_WITH(tcllib,[  --with-tcllib=path      Set location of Tcl library directory],[
 	TCLLIB="-L$withval"], [TCLLIB=])
 
+if test "x${with_tcl}" != 'xno'; then
+
 AC_MSG_CHECKING([for Tcl configuration])
 # First check to see if --with-tclconfig was specified.
 if test x"${with_tclconfig}" != x ; then
@@ -430,6 +432,8 @@ CYGWIN*) TCLDYNAMICLINKING="$TCLLIB";;
 *)TCLDYNAMICLINKING="";;
 esac
 
+fi # test "x${with_tcl}" != 'xno'
+
 AC_SUBST(TCLINCLUDE)
 AC_SUBST(TCLLIB)
 AC_SUBST(TCLDYNAMICLINKING)
@@ -469,6 +473,8 @@ AC_ARG_WITH(python,[  --with-python=path
 
 # First figure out the name of the Python executable
 
+if test "x${PYBIN}" != 'xno'; then
+
 if test -z "$PYBIN"; then
 AC_CHECK_PROGS(PYTHON, $prefix/bin/python python python2.4 python2.3 python2.2 python2.1 python2.0 python1.6 python1.5 python1.4 python)
 else
@@ -538,6 +544,7 @@ CYGWIN*) PYTHONDYNAMICLINKING="-L$PYLIB 
 *)PYTHONDYNAMICLINKING="";;
 esac
 
+fi # test "x${PYBIN}" != 'xno'
 
 AC_SUBST(PYINCLUDE)
 AC_SUBST(PYLIB)
@@ -554,6 +561,8 @@ AC_ARG_WITH(perl5,[  --with-perl5=path  
 
 # First figure out what the name of Perl5 is
 
+if test "x${PERLBIN}" != 'xno'; then
+
 if test -z "$PERLBIN"; then
 AC_CHECK_PROGS(PERL, perl perl5.6.1 perl5.6.0 perl5.004 perl5.003 perl5.002 perl5.001 perl5 perl)
 else
@@ -601,6 +610,8 @@ CYGWIN*) PERL5DYNAMICLINKING="-L$PERL5EX
 *)PERL5DYNAMICLINKING="";;
 esac
 
+fi # test "x${PERLBIN}" != 'xno'
+
 AC_SUBST(PERL5EXT)
 AC_SUBST(PERL5DYNAMICLINKING)
 AC_SUBST(PERL5LIB)
@@ -617,6 +628,8 @@ AC_SUBST(PERL5LIB)
 AC_ARG_WITH(java, [  --with-java=path        Set location of Java],[JAVABIN="$withval"], [JAVABIN=])
 AC_ARG_WITH(javac, [  --with-javac=path       Set location of Javac],[JAVACBIN="$withval"], [JAVACBIN=])
 
+if test "x${JAVABIN}" != 'xno'; then
+
 if test -z "$JAVABIN" ; then
   AC_CHECK_PROGS(JAVA, java kaffe guavac)
 else
@@ -679,6 +692,7 @@ CYGWIN*) JAVALIBRARYPREFIX="";;
 *)JAVALIBRARYPREFIX="lib";;
 esac
 
+fi # test "x${JAVABIN}" != 'xno'
 
 AC_SUBST(JAVA)
 AC_SUBST(JAVAC)
@@ -695,15 +709,17 @@ AC_SUBST(ROOT_DIR)ROOT_DIR=`pwd`
 GUILEINCLUDE=
 GUILELIB=
 GUILELINK=
+GUILEPACKAGE=
+
+AC_ARG_WITH(guile,[  --with-guile=path       Set location of Guile],[
+	GUILEPACKAGE="$withval"], [GUILEPACKAGE=])
+
+if test "x${GUILEPACKAGE}" != 'xno'; then
 
 AC_PATH_PROG(GUILE_CONFIG, guile-config)
 
 if test -n "$GUILE_CONFIG" ; then
 
-  GUILEPACKAGE=
-
-  AC_ARG_WITH(guile,[  --with-guile=path       Set location of Guile],[
-	GUILEPACKAGE="$withval"], [GUILEPACKAGE=])
   AC_ARG_WITH(guilencl,[  --with-guileincl=path   Set location of Guile include directory],[
 	GUILEINCLUDE="$withval"], [GUILEINCLUDE=])
   AC_ARG_WITH(guilelib,[  --with-guilelib=path    Set location of Guile library directory],[
@@ -754,6 +770,8 @@ if test -n "$GUILE_CONFIG" ; then
 
 fi # have GUILE_CONFIG
 
+fi # test "x${GUILEPACKAGE}" != 'xno'
+
 AC_SUBST(GUILEINCLUDE)
 AC_SUBST(GUILELIB)
 AC_SUBST(GUILELINK)
@@ -772,6 +790,8 @@ RUBYBIN=
 
 AC_ARG_WITH(ruby,[  --with-ruby=path        Set location of Ruby executable],[ RUBYBIN="$withval"], [RUBYBIN=])
 
+if test "x${RUBYBIN}" != 'xno'; then
+
 # First figure out what the name of Ruby is
 
 if test -z "$RUBYBIN"; then
@@ -847,6 +867,7 @@ CYGWIN*)	RUBYDYNAMICLINKING="-L$RUBYLIB 
 *)		RUBYDYNAMICLINKING="";;
 esac
 
+fi # test "x${RUBYBIN}" != 'xno'
 
 AC_SUBST(RUBYINCLUDE)
 AC_SUBST(RUBYLIB)
@@ -862,6 +883,8 @@ PHP4BIN=
 
 AC_ARG_WITH(php4,[  --with-php4=path	  Set location of PHP4 executable],[ PHP4BIN="$withval"], [PHP4BIN=])
 
+if test "x${PHP4BIN}" != 'xno'; then
+
 if test -z "$PHP4BIN"; then
 AC_CHECK_PROGS(PHP4, php, php4)
 else
@@ -884,6 +907,8 @@ if test -z "$PHP4INC"; then
 	AC_MSG_RESULT(not found)
 fi
 
+fi # test "x${PHP4BIN}" != 'xno'
+
 AC_SUBST(PHP4INC)
 
 # kludges to ease naming conventions conformance.
@@ -899,6 +924,8 @@ AC_SUBST(PHP4INC)
 AC_ARG_WITH(ocaml,[  --with-ocaml=path	  Set location of ocaml executable],[ OCAMLBIN="$withval"], [OCAMLBIN=])
 AC_ARG_WITH(ocamlc,[  --with-ocamlc=path  Set location of ocamlc executable],[ OCAMLC="$withval"], [OCAMLC=])
 
+if test "x${OCAMLBIN}" != 'xno'; then
+
 AC_MSG_CHECKING(for Ocaml compiler)
 if test -z "$OCAMLC"; then
 AC_CHECK_PROGS(OCAMLC, ocamlc, ocamlc)
@@ -926,6 +953,8 @@ if test -z "$OCAMLINC"; then
 	AC_MSG_RESULT(not found)
 fi
 
+fi # test "x${OCAMLBIN}" != 'xno'
+
 export OCAMLINC
 export OCAMLBIN
 export OCAMLC
@@ -941,6 +970,9 @@ AC_SUBST(OCAMLC)
 # Identify the name of the Pike executable
 PIKEBIN=
 AC_ARG_WITH(pike,[  --with-pike=path       Set location of Pike executable],[ PIKEBIN="$withval"], [PIKEBIN=])
+
+if test "x${PIKEBIN}" != 'xno'; then
+
 if test -z "$PIKEBIN"; then
 	AC_CHECK_PROGS(PIKE, pike)
 else
@@ -966,6 +998,8 @@ fi
 else
         AC_MSG_RESULT($PIKEINCLUDE)
 fi
+
+fi # test "x${PIKEBIN}" != 'xno'; then
 
 AC_SUBST(PIKEINCLUDE)
 AC_SUBST(PIKECCDLFLAGS)
