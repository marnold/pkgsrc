$NetBSD: patch-ad,v 1.1.1.1 2001/03/21 23:36:07 jwise Exp $
--- Makefile.in.orig	Fri Oct 20 05:06:30 2000
+++ Makefile.in	Wed Mar 21 15:10:52 2001
@@ -29,8 +29,8 @@
 PYTHCNFG  = @PYTH_CONFIG@
 PYCNF   = @PYCNF@
 
-CC      = @CC@
-LD      = $(CC)
+CC      = ${LIBTOOL} --mode=compile @CC@
+LD      = ${LIBTOOL} --mode=link @CC@
 RANLIB  = @RANLIB@
 INSTALL = @INSTALL@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
@@ -39,13 +39,13 @@
 LDEXE   = @LDEXE@
 
 SO       = @SO@
-LDSHARED = @LDSHARED@
-CCSHARED = @CCSHARED@
+LDSHARED = ${LIBTOOL} --mode=link @CC@
+CCSHARED = ${LIBTOOL} --mode=compile @CC@
 
 FRC       =
 CPPFLAGS = -I. -I$(srcdir) @CPPFLAGS@
 CFLAGS   = @CFLAGS@
-LDFLAGS  = @LDFLAGS@
+LDFLAGS  = @LDFLAGS@ -shared
 LIBS     = $(EXPLIB) @LIBS@
 INSTLIBDIR = @PYTH_SHLIBDIR@
 
@@ -109,8 +109,8 @@
 	$(LDEXE) $(LDFLAGS) -o $@ $(PYTH_OBJS) pyconfig.o \
 	  $(MODNAME)module.a $(EXPSUBLIB).a $(LIBS)
 
-$(MODNAME)module$(SO): $(OBJS:.o=.os) $(EXPSUBLIB).as
-	$(LDSHARED) $(LDFLAGS) -o $@ $(OBJS:.o=.os) $(EXPSUBLIB).as $(LIBS)
+$(MODNAME)module$(SO): $(OBJS) $(EXPSUBLIB).a
+	$(LDSHARED) $(LDFLAGS) -o $@ $(OBJS:.o=.lo) $(EXPSUBLIB).la $(LIBS)
 $(MODNAME)module.a: $(OBJS)
 	$(AR) $(ARFLAGS) $@ $(OBJS)
 	$(RANLIB) $@
