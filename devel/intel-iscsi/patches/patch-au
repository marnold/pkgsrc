$NetBSD: patch-au,v 1.1.1.1 2005/10/30 21:02:58 agc Exp $

--- src/osd_ops.c	2005/10/27 19:19:42	1.1
+++ src/osd_ops.c	2005/10/27 19:27:44
@@ -45,17 +45,17 @@
   int i = 0;
 
   for (i=0; i<length;) {
-    if (NTOHL(*(uint32_t *)(data+i))!=page) {
-      TRACE_ERROR("page mismatch: got 0x%x, expected 0x%x\n", NTOHL(*(uint32_t *)(data+i)), page);
+    if (ISCSI_NTOHL(*(uint32_t *)(data+i))!=page) {
+      TRACE_ERROR("page mismatch: got 0x%x, expected 0x%x\n", ISCSI_NTOHL(*(uint32_t *)(data+i)), page);
       return -1;
     }
     i+=4;
-    if (NTOHL(*(uint32_t *)(data+i))!=index) {
+    if (ISCSI_NTOHL(*(uint32_t *)(data+i))!=index) {
       TRACE_ERROR("index mismatch\n");
       return -1;
     }
     i+=4;
-    if (NTOHS(*(uint16_t *)(data+i))!=len) {
+    if (ISCSI_NTOHS(*(uint16_t *)(data+i))!=len) {
       TRACE_ERROR("len mismatch\n");
       return -1;
     }
@@ -88,8 +88,8 @@
 #if 0
   args.length = 8;
   args.get_attributes_list_length = 8;
-  *((unsigned long*)get_list) = HTONL(0x40000001);
-  *((unsigned long*)(get_list+4)) = HTONL(0x1);
+  *((unsigned long*)get_list) = ISCSI_HTONL(0x40000001);
+  *((unsigned long*)(get_list+4)) = ISCSI_HTONL(0x1);
   mem.send_data = get_list; mem.send_len = 8; mem.send_sg = 0;
 #else
   args.get_attributes_page = 0x40000001;
@@ -105,7 +105,7 @@
     TRACE_ERROR("extract_attributes() failed\n");
     return -1;
   }
-  *GroupID = NTOHL(*GroupID);
+  *GroupID = ISCSI_NTOHL(*GroupID);
   TRACE(TRACE_OSD, "osd_create_group() OK --> GroupID 0x%x\n", *GroupID);
 
   return 0;
@@ -131,8 +131,8 @@
   #if 0
   args.length = 8;
   args.get_attributes_list_length = 8;
-  *((unsigned long*)get_list) = HTONL(0x00000001);
-  *((unsigned long*)(get_list+4)) = HTONL(0x2);
+  *((unsigned long*)get_list) = ISCSI_HTONL(0x00000001);
+  *((unsigned long*)(get_list+4)) = ISCSI_HTONL(0x2);
   mem.send_data = get_list; mem.send_len = 8; mem.send_sg = 0;
   #else
   args.get_attributes_page = 0x000000001;
@@ -148,7 +148,7 @@
     TRACE_ERROR("extract_attributes() failed\n");
     return -1;
   }
-  *UserID = NTOHLL(*UserID);
+  *UserID = ISCSI_NTOHLL(*UserID);
   TRACE(TRACE_OSD, "osd_create(GroupID 0x%x) OK --> UserID 0x%llx\n", GroupID, *UserID);
 
   return 0;
@@ -264,9 +264,9 @@
   args.UserID = UserID;
   args.length = 10+len;
   args.set_attributes_list_length = 10+len;
-  *((uint32_t *)  (list+0)) = HTONL(page);
-  *((uint32_t *)  (list+4)) = HTONL(index);
-  *((uint16_t *)  (list+8)) = HTONS(len);
+  *((uint32_t *)  (list+0)) = ISCSI_HTONL(page);
+  *((uint32_t *)  (list+4)) = ISCSI_HTONL(index);
+  *((uint16_t *)  (list+8)) = ISCSI_HTONS(len);
 #if 0
   sg[0].iov_base = list; 
   sg[0].iov_len = 10;
@@ -316,8 +316,8 @@
   args.UserID = UserID;
   if (index) {
     args.length = 8;
-    *((uint32_t *)(list_out+0)) = HTONL(page);
-    *((uint32_t *)(list_out+4)) = HTONL(index);
+    *((uint32_t *)(list_out+0)) = ISCSI_HTONL(page);
+    *((uint32_t *)(list_out+4)) = ISCSI_HTONL(index);
     args.get_attributes_list_length = 8;
     mem.send_data = list_out; mem.send_len = 8; mem.send_sg = 0;
   } else {
