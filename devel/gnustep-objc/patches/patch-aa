$NetBSD: patch-aa,v 1.1.1.1 2002/09/27 10:44:47 rh Exp $

--- thr-posix.c.orig	Sat May  5 03:23:21 2001
+++ thr-posix.c
@@ -96,6 +96,7 @@ __objc_thread_detach(void (*func)(void *
 int
 __objc_thread_set_priority(int priority)
 {
+#ifndef _PTH_PTHREAD_H_
   pthread_t thread_id = pthread_self();
   int policy;
   struct sched_param params;
@@ -123,6 +124,7 @@ __objc_thread_set_priority(int priority)
       if (pthread_setschedparam(thread_id, policy, &params) == 0)
         return 0;
     }
+#endif
   return -1;
 }
 
@@ -130,6 +132,12 @@ __objc_thread_set_priority(int priority)
 int
 __objc_thread_get_priority(void)
 {
+#ifdef _PTH_PTHREAD_H_
+  int prio = -1;
+
+  pthread_attr_getprio_np(&_objc_thread_attribs, &prio);
+  return prio;
+#else
   int policy;
   struct sched_param params;
 
@@ -137,6 +145,7 @@ __objc_thread_get_priority(void)
     return params.sched_priority;
   else
     return -1;
+#endif
 }
 
 /* Yield our process time to another thread. */
