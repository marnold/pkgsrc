$NetBSD: patch-aa,v 1.1.1.1 2000/12/16 16:53:14 wiz Exp $

--- makefile.orig	Thu Nov  2 11:44:48 2000
+++ makefile	Fri Dec 15 16:36:50 2000
@@ -26,11 +26,13 @@
 
 #CC              = egcs
 CC		= gcc
-CFLAGS          = -O2 -m486 -Wall -DAVRLANG=LANGUAGE_$(LANGUAGE)
+CFLAGS          = -O2 -Wall -DAVRLANG=LANGUAGE_$(LANGUAGE)
 CPPFLAGS	=
 CCFLAGS         = $(CFLAGS) $(CPPFLAGS)
 LINK            = -lm
 OBJS		= avrparse.o avrlex.o avrasm.o symbol.o semantic.o utils.o
+LEX		= lex
+YACC		= bison
 
 ### Defaul CC files #########################################################
 
@@ -39,13 +41,15 @@
 
 ### Executable ##############################################################
 
+all:	$(EXENAME)
+
 $(EXENAME):	$(OBJS)
 		$(CC) $(CCFLAGS) $(OBJS) $(LINK) -o $@
 
 ### Parser file #############################################################
 
 avrparse.cc:	avrparse.y avrasm.hh symbol.hh semantic.hh opcodes.hh
-		bison -d -o avrparse avrparse.y
+		${YACC} -d -o avrparse avrparse.y
 		mv avrparse avrparse.cc
 		mv avrparse.h avrparse.hh
 
@@ -53,12 +57,12 @@
 
 avrlex.cc:	avrparse.cc avrlex.l symbol.hh semantic.hh avrparse.hh \
 		opcodes.hh avrasm.hh messages.hh
-		flex -o$@ avrlex.l
+		${LEX} -o$@ avrlex.l
 
 ### Dependencies ############################################################
 
-avrlex.o:	avrlex.l
-avrparse.o:	avrparse.y
+avrlex.o:	avrlex.cc
+avrparse.o:	avrparse.cc
 avrasm.o:	avrasm.cc avrasm.hh symbol.hh devices.hh messages.hh
 symbol.o:	symbol.cc symbol.hh avrasm.hh
 utils.o:	utils.cc utils.hh avrasm.hh messages.hh msg_us.hh msg_de.hh msg_sp.hh
