$NetBSD: patch-ab,v 1.1.1.1 2002/05/04 01:10:04 jtb Exp $

--- configure.orig	Wed Apr 17 02:47:02 2002
+++ configure	Wed Apr 17 02:51:35 2002
@@ -597,7 +597,7 @@
 LIBS="$LIBS -lm"
 f77_compile='${F77-f77} $FFLAGS -c conftest.f 1>&5 2>&5'
 f77_make='make F77="${F77-f77}" FFLAGS="$FFLAGS" -f conftest.mak conftest.o 1>&5 2>&5'
-c_f77_link='(${F77-f77} $FFLAGS -c conftestf.f && ${CC-cc} $CFLAGS $CPPFLAGS conftest.c conftestf.o -o conftest $LDFLAGS $LIBS) 1>&5 2>&5'
+c_f77_link='(${F77-f77} $FFLAGS -c conftestf.f && ${CC-cc} $CFLAGS $CPPFLAGS -c conftest.c && ${F77-f77} conftest.o conftestf.o -o conftest $LDFLAGS $LIBS) 1>&5 2>&5'
 
 # The next two don't include LDFLAGS, because some loser f77 compilers
 # (like on hp) do their own thing with the -L option.
@@ -2344,24 +2344,24 @@
 #---------------------------------------------------------------------
 	
 # Check whether --with-fortran-libs or --without-fortran-libs was given.
-if test "${with_fortran_libs+set}" = set; then
-  withval="$with_fortran_libs"
-  fortran_libs="${withval}"
-else
-  # The patterns are not necessarily exclusive, so their order is important.
-  case "$host" in
-	 sparc-sun-sunos4* )
-	   fortran_libs="/usr/lang/SC1.0" ;;
-	 sparc-sun-solaris2* )
-	   fortran_libs=`/bin/ls -d /opt/SUNWspro/SC* | head -1`/lib ;;
-	 alpha*-*-osf* )
-	   fortran_libs="/usr/lib" ;;
-	 *-hp-hpux1* )
-	   fortran_libs="/opt/fortran/lib" ;;
-	 * )
-	   fortran_libs="" ;;
-  esac
-fi
+#  if test "${with_fortran_libs+set}" = set; then
+#    withval="$with_fortran_libs"
+#    fortran_libs="${withval}"
+#  else
+#    # The patterns are not necessarily exclusive, so their order is important.
+#    case "$host" in
+#  	 sparc-sun-sunos4* )
+#  	   fortran_libs="/usr/lang/SC1.0" ;;
+#  	 sparc-sun-solaris2* )
+#  	   fortran_libs=`/bin/ls -d /opt/SUNWspro/SC* | head -1`/lib ;;
+#  	 alpha*-*-osf* )
+#  	   fortran_libs="/usr/lib" ;;
+#  	 *-hp-hpux1* )
+#  	   fortran_libs="/opt/fortran/lib" ;;
+#  	 * )
+#  	   fortran_libs="" ;;
+#    esac
+#  fi
 
 	
 #---------------------------------------------------------------------
@@ -2369,23 +2369,23 @@
 #  are not necessarily exclusive, so their order is important.
 #---------------------------------------------------------------------
 	
-case "$host" in
-  alpha*	) f77_lib_names="Futil ots for Ufor" ;;
-  *-aix*	) f77_lib_names="xlf xlf90" ;;
-  *-hpux1*	) f77_lib_names="cl U77" ;;
-  *-hpux9*	) f77_lib_names="f U77" ;;
-  *-hpux*	) f77_lib_names="F77 I77 IO77" ;;
-  *-dec-ultrix*	) f77_lib_names="for i util ots I77 U77 F77" ;;
-  mips-sgi-irix*) f77_lib_names="F77 I77 U77 isam fpe" ;;
-  mips-*	) f77_lib_names="F77 I77 U77 isam" ;;
-  *-solaris2*	) f77_lib_names="F77 M77 sunmath" ;;
-  *-sunos4*	) f77_lib_names="F77 V77" ;;
-  titan-*	) f77_lib_names="iF77 uF77 mF77" ;;
-  *-unicos*	) f77_lib_names="F77 I77 sci f" ;;
-  *		) f77_lib_names="F77 I77" ;;
-esac
-f77_lib_names="$f77_lib_names g2c f2c"
-for f in $f77_lib_names; do reversed_names="$f $reversed_names"; done
+#  case "$host" in
+#    alpha*	) f77_lib_names="Futil ots for Ufor" ;;
+#    *-aix*	) f77_lib_names="xlf xlf90" ;;
+#    *-hpux1*	) f77_lib_names="cl U77" ;;
+#    *-hpux9*	) f77_lib_names="f U77" ;;
+#    *-hpux*	) f77_lib_names="F77 I77 IO77" ;;
+#    *-dec-ultrix*	) f77_lib_names="for i util ots I77 U77 F77" ;;
+#    mips-sgi-irix*) f77_lib_names="F77 I77 U77 isam fpe" ;;
+#    mips-*	) f77_lib_names="F77 I77 U77 isam" ;;
+#    *-solaris2*	) f77_lib_names="F77 M77 sunmath" ;;
+#    *-sunos4*	) f77_lib_names="F77 V77" ;;
+#    titan-*	) f77_lib_names="iF77 uF77 mF77" ;;
+#    *-unicos*	) f77_lib_names="F77 I77 sci f" ;;
+#    *		) f77_lib_names="F77 I77" ;;
+#  esac
+#  f77_lib_names="$f77_lib_names g2c f2c"
+#  for f in $f77_lib_names; do reversed_names="$f $reversed_names"; done
 	
 #---------------------------------------------------------------------
 #  On linux (and perhaps other GNU systems), the linker has trouble
@@ -2393,7 +2393,7 @@
 #---------------------------------------------------------------------
 
 cat >> confdefs.h <<\EOF
-#if linux
+#if defined (linux) || defined (__NetBSD__)
 void MAIN__ (void) {abort();}
 void etime_ (void) {abort();}
 #endif
