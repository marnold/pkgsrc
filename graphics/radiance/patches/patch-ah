$NetBSD: patch-ah,v 1.1.1.1 2005/02/16 22:17:34 jschauma Exp $

--- src/hd/Rmakefile.orig	2004-10-27 19:23:47.000000000 -0400
+++ src/hd/Rmakefile	2005-02-15 17:24:20.000000000 -0500
@@ -7,16 +7,14 @@
 
 OPT = -O
 
-CFLAGS = -I../common -L../lib $(OPT) $(MACH)
-
-CC = cc
+CFLAGS += -I../common -L../lib $(OPT) $(MACH) ${LDFLAGS}
 
 SPECIAL =
 
-INSTDIR = /usr/local/bin
-DEVDIR = $(INSTDIR)/dev
+INSTDIR = @WRKSRC@/radiance/bin
+DEVDIR = @WRKSRC@/radiance/dev
 
-LIBDIR = /usr/local/lib/ray
+LIBDIR = @WRKSRC@/radiance/lib
 
 PROGS = rholo rhpict rhcopy genrhgrid rhoptimize rhinfo
 
@@ -119,7 +117,7 @@
 rhd_qtree.o rhd_qtree2c.o holo.o
 	rm -f $(DEVDIR)/glx1.hdi
 	$(CC) $(CFLAGS) -o $(DEVDIR)/glx1.hdi rhd_glx1.o rhdisp.o rhdisp2.o \
-viewbeams.o holo.o rhd_qtree.o rhd_qtree2c.o -lrt -lGLU -lGL -lX11 -lm
+viewbeams.o holo.o rhd_qtree.o rhd_qtree2c.o -lrt -lX11 -lm
 
 $(DEVDIR)/glx.hdi:	rhd_glx0.o rhdisp.o rhdisp2.o viewbeams.o \
 sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
@@ -127,7 +125,7 @@
 	rm -f $(DEVDIR)/glx.hdi
 	$(CC) $(CFLAGS) -o $(DEVDIR)/glx.hdi rhd_glx0.o rhdisp.o rhdisp2.o \
 viewbeams.o holo.o sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
-sm_ogl.o sm.o sm_usets.o -lrt -lGLU -lGL -lX11 -lm
+sm_ogl.o sm.o sm_usets.o -lrt -lX11 -lm
 
 $(DEVDIR)/glxo.hdi:	rhd_glxo.o rhdisp.o rhdisp2.o viewbeams.o \
 sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
@@ -135,7 +133,7 @@
 	rm -f $(DEVDIR)/glxo.hdi
 	$(CC) $(CFLAGS) -o $(DEVDIR)/glxo.hdi rhd_glxo.o rhdisp.o rhdisp2.o \
 viewbeams.o holo.o sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
-sm_ogl.o sm_usets.o sm.o rhdobj.o -lrgl -lrt -lGLU -lGL -lX11 -lm
+sm_ogl.o sm_usets.o sm.o rhdobj.o -lrgl -lrt -lX11 -lm
 
 $(DEVDIR)/glxs.hdi:	rhd_glxs.o rhdisp.o rhdisp2.o viewbeams.o \
 sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
@@ -143,7 +141,7 @@
 	rm -f $(DEVDIR)/glxs.hdi
 	$(CC) $(CFLAGS) -o $(DEVDIR)/glxs.hdi rhd_glxs.o rhdisp.o rhdisp2.o \
 viewbeams.o holo.o sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
-sm_ogl.o sm_usets.o sm.o -lrt -lGLU -lGL -lX11 -lXext -lm
+sm_ogl.o sm_usets.o sm.o -lrt -lX11 -lXext -lm
 
 $(DEVDIR)/glxso.hdi:	rhd_glxso.o rhdisp.o rhdisp2.o viewbeams.o \
 sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
@@ -152,30 +150,30 @@
 	$(CC) $(CFLAGS) -o $(DEVDIR)/glxso.hdi rhd_glxso.o rhdisp.o rhdisp2.o \
 viewbeams.o holo.o sm_samp.o sm_qtree.o sm_stree.o sm_geom.o sm_list.o sm_del.o \
 sm_ogl.o sm_usets.o sm.o rhdobj.o \
--lrgl -lrt -lGLU -lGL -lX11 -lXext -lm
+-lrgl -lrt -lX11 -lXext -lm
 
 $(DEVDIR)/ogl.hdi:	rhd_ogl0.o rhdisp.o rhdisp2.o viewbeams.o \
 rhd_odraw.o rhd_geom.o holo.o
 	$(CC) $(CFLAGS) -o $(DEVDIR)/ogl.hdi rhd_ogl0.o rhdisp.o rhdisp2.o \
-viewbeams.o holo.o rhd_odraw.o rhd_geom.o -lrgl -lrt -lGLU -lGL -lX11 -lm
+viewbeams.o holo.o rhd_odraw.o rhd_geom.o -lrgl -lrt -lX11 -lm
 
 $(DEVDIR)/oglo.hdi:	rhd_oglo.o rhdisp.o rhdisp2.o viewbeams.o \
 rhd_odraw.o rhd_geom.o holo.o rhdobj.o
 	$(CC) $(CFLAGS) -o $(DEVDIR)/oglo.hdi rhd_oglo.o rhdisp.o \
 rhdisp2.o viewbeams.o holo.o rhd_odraw.o rhd_geom.o rhdobj.o \
--lrgl -lrt -lGLU -lGL -lX11 -lm
+-lrgl -lrt -lX11 -lm
 
 $(DEVDIR)/ogls.hdi:	rhd_ogls.o rhdisp.o rhdisp2.o viewbeams.o \
 rhd_odraw.o rhd_geom.o holo.o
 	$(CC) $(CFLAGS) -o $(DEVDIR)/ogls.hdi rhd_ogls.o rhdisp.o rhdisp2.o \
 viewbeams.o holo.o rhd_odraw.o rhd_geom.o \
--lrgl -lrt -lGLU -lGL -lX11 -lXext -lm
+-lrgl -lrt -lX11 -lXext -lm
 
 $(DEVDIR)/oglso.hdi:	rhd_oglso.o rhdisp.o rhdisp2.o viewbeams.o \
 rhd_odraw.o rhd_geom.o holo.o rhdobj.o
 	$(CC) $(CFLAGS) -o $(DEVDIR)/oglso.hdi rhd_oglso.o rhdisp.o rhdisp2.o \
 viewbeams.o holo.o rhd_odraw.o rhd_geom.o rhdobj.o \
--lrgl -lrt -lGLU -lGL -lX11 -lXext -lm
+-lrgl -lrt -lX11 -lXext -lm
 
 rhd_glx0.o:	rhd_glx.c
 	$(CC) $(CFLAGS) -c rhd_glx.c
