--- libv4l2/libv4l2.c.orig	2008-09-08 14:41:10.000000000 -0400
+++ libv4l2/libv4l2.c	2008-09-08 14:42:04.000000000 -0400
@@ -59,7 +59,11 @@
 #include <stdarg.h>
 #include <stdio.h>
 #include <stdlib.h>
+#ifdef __linux__
 #include <syscall.h>
+#else
+#include <sys/syscall.h>
+#endif
 #include <fcntl.h>
 #include <string.h>
 #include <unistd.h>
@@ -69,6 +73,10 @@
 #include "libv4l2.h"
 #include "libv4l2-priv.h"
 
+#ifndef MAP_ANONYMOUS
+#define MAP_ANONYMOUS MAP_ANON
+#endif
+
 /* Note these flags are stored together with the flags passed to v4l2_fd_open()
    in v4l2_dev_info's flags member, so care should be taken that the do not
    use the same bits! */
