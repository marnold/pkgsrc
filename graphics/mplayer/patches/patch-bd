$NetBSD: patch-bd,v 1.1.1.1 2001/12/21 23:38:52 zuntum Exp $

--- libvo/x11_common.c.orig	Wed Jul  4 01:23:55 2001
+++ libvo/x11_common.c
@@ -17,9 +17,6 @@
 #include <X11/Xutil.h>
 #include <X11/Xatom.h>
 
-#include <X11/extensions/dpms.h>
-
-static int dpms_disabled=0;
 static int timeout_save=0;
 
 char* mDisplayName=NULL;
@@ -279,25 +276,6 @@
 void saver_on(Display *mDisplay) {
 
     int nothing;
-    if (dpms_disabled)
-    {
-	if (DPMSQueryExtension(mDisplay, &nothing, &nothing))
-	{
-	    if (!DPMSEnable(mDisplay)) {  // restoring power saving settings
-                printf("DPMS not available?\n");
-            } else {
-                // DPMS does not seem to be enabled unless we call DPMSInfo
-	        BOOL onoff;
-        	CARD16 state;
-        	DPMSInfo(mDisplay, &state, &onoff);
-                if (onoff) {
-	            printf ("Successfully enabled DPMS\n");
-                } else {
-	            printf ("Could not enable DPMS\n");
-                }
-            }
-	}
-    }
     
     if (timeout_save)
     {
@@ -313,20 +291,6 @@
 
     int interval, prefer_blank, allow_exp, nothing;
 
-    if (DPMSQueryExtension(mDisplay, &nothing, &nothing))
-    {
-	BOOL onoff;
-	CARD16 state;
-	DPMSInfo(mDisplay, &state, &onoff);
-	if (onoff)
-	{
-           Status stat;
-	    printf ("Disabling DPMS\n");
-	    dpms_disabled=1;
-	    stat = DPMSDisable(mDisplay);  // monitor powersave off
-            printf ("stat: %d\n", stat);
-	}
-    }
     XGetScreenSaver(mDisplay, &timeout_save, &interval, &prefer_blank, &allow_exp);
     if (timeout_save)
 	XSetScreenSaver(mDisplay, 0, interval, prefer_blank, allow_exp);
