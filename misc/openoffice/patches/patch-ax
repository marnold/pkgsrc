$NetBSD: patch-ax,v 1.1.1.1 2002/02/13 18:09:22 mrauch Exp $

--- ../dtrans/source/X11/X11_selection.cxx.orig	Tue Sep 11 11:23:56 2001
+++ ../dtrans/source/X11/X11_selection.cxx
@@ -63,7 +63,7 @@
 #include <stdio.h>
 #include <X11/Xatom.h>
 #include <X11/keysym.h>
-#ifdef LINUX
+#if defined(LINUX) || defined(NETBSD)
 #include <sys/poll.h>
 #else
 #include <poll.h>
@@ -2681,7 +2681,12 @@
 	aPollFD.revents = 0;
 
 	// wait for activity (outside the xlib)
+#if defined(NETBSD)  
+        // PSEUDOTHREADS: never block as this stops the complete program
+       	if( poll( &aPollFD, 1, 0 ) > 0 )
+#else
 	if( poll( &aPollFD, 1, millisec ) > 0 )
+#endif
 	{
 		// now acquire the mutex to prevent other threads
 		// from using the same X connection
