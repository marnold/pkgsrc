$NetBSD: patch-bt,v 1.1.1.1 2002/02/13 18:09:22 mrauch Exp $

--- ../setup2/source/ui/pages/paddr.cxx.orig	Fri Sep 14 09:56:31 2001
+++ ../setup2/source/ui/pages/paddr.cxx
@@ -178,7 +178,10 @@
 	m_aCountryList.SetDropDownLineCount( 5 );
 
 	#ifdef UNX
-	m_aShortName.SetText( UniString::CreateFromAscii(getenv("LOGNAME")) );
+	// LOGNAME may be unset -- passed down pointer must not be NULL
+	sal_Char* getlogname = getenv("LOGNAME");
+	if (getlogname == NULL) { getlogname = ""; };
+	m_aShortName.SetText( UniString::CreateFromAscii(getlogname) );
 	#else
 	m_aFirstName.SetModifyHdl( LINK( this, PageAddress, ModifyHdl ) );
 	m_aName.SetModifyHdl( LINK( this, PageAddress, ModifyHdl ) );
