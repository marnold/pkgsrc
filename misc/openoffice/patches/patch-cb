$NetBSD: patch-cb,v 1.1.1.1 2002/02/13 18:09:22 mrauch Exp $

--- ../solenv/inc/unxbsds.mk.orig	Tue Jan  1 14:11:59 2002
+++ ../solenv/inc/unxbsds.mk
@@ -73,7 +73,7 @@
 #LINKOUTPUT_FILTER=" |& $(SOLARENV)$/bin$/msg_filter"
 
 # _PTHREADS is needed for the stl
-CDEFS+=-D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1 -DSTLPORT_VERSION=400 -DOSL_USE_SYS_V_SEMAPHORE
+CDEFS+=-D_PTHREADS -D_REENTRANT -DNEW_SOLAR -D_USE_NAMESPACE=1 -DSTLPORT_VERSION=400 
 
 # this is a platform with JAVA support
 .IF "$(SOLAR_JAVA)"!=""
@@ -139,8 +139,8 @@
 LINKFLAGSAPPGUI= -Wl,-export-dynamic 
 LINKFLAGSAPPCUI= -Wl,-export-dynamic
 # linker flags for linking shared libraries
-LINKFLAGSSHLGUI= -shared
-LINKFLAGSSHLCUI= -shared
+LINKFLAGSSHLGUI= -Wl,-export-dynamic -shared
+LINKFLAGSSHLCUI= -Wl,-export-dynamic -shared
 
 LINKFLAGSTACK=
 LINKFLAGSPROF=
@@ -156,6 +156,8 @@
 
 LINKVERSIONMAPFLAG=-Wl,--version-script
 
+SONAME_SWITCH=-Wl,-h
+
 # Sequence of libs does matter !
 
 STDLIBCPP=-lstdc++
@@ -172,7 +174,7 @@
 STDLIBCUIMT=-lpthread -lm
 STDLIBGUIST=-lXaw -lXt -lX11 -lm
 # libraries for linking shared libraries
-STDSHLGUIMT=-lXaw -lXt -lX11 -lXext -lpthread -lm
+STDSHLGUIMT=-lXaw -lXt -lX11 -lXext -lpthread -lm 
 STDSHLCUIMT=-lpthread -lm
 
 # STLport always needs pthread. This may yield some redundant -lpthread
