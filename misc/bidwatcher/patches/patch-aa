$NetBSD: patch-aa,v 1.1.1.1 2001/09/22 05:38:22 jlam Exp $

--- Makefile.orig	Fri Jun  9 17:12:46 2000
+++ Makefile
@@ -5,71 +5,49 @@
 # Tom McNair   (tmcnair@cyberhighway.net)
 # Wayne Schlitt (wayne@midwestcs.com)
 #
-# Makefile
+# Makefile for FreeBSD courtesy of Will Andrews <andrews@technologist.com>
 #
 # CHANGE WHAT YOU NEED TO, THE MOST LIKELY CANDIDATES FOR CHANGE ARE:
 # QTDIR, SYSCONF_CFLAGS_X11, SYSCONF_LFLAGS_X11, SYSCONF_MOC
 
-#
-# You might want to add one of these defines to the OPTIONS variable:
-#
-# Bidwatcher needs to determine the local time on the west coast of
-# the US in order to figure out when auctions will end.  To do this,
-# it first needs to know the time as GMT.  Apparently, there is no
-# good portable way to do this, so you may have to select one of these
-# options if compiles fail.
-#
-# -DHAVE_GMTIME		Define if you want to use the BSD gmtime() function
-# -DHAVE_TIMEZONE	Define if you want to use the SVID localtime function
-# -DHAVE_GMTOFF		Define if you want to use the tm_gmtoff 
-#
-#
-# -DDEBUG_NETWORK	Define if you want network debuging spewed to stderr
-#	
-
-#OPTIONS= -DHAVE_GMTOFF  -DDEBUG_NETWORK
-OPTIONS= -DHAVE_GMTOFF
-
-SYSCONF_CC		= g++
+SYSCONF_CC		= ${CXX}
 
-QTDIR = /usr/include/qt
-SYSCONF_CFLAGS_X11	= -I/usr/X11R6/include
-SYSCONF_CFLAGS_QT	= -I$(QTDIR)
-SYSCONF_CFLAGS_OPENGL	= -I/usr/X11R6/include
+#QTDIR = /usr/include/qt2
+SYSCONF_CFLAGS_X11	= -I@BUILDLINK_X11_DIR@/include
+SYSCONF_CFLAGS_QT	= -I$(QTDIR)/include
+SYSCONF_CFLAGS_OPENGL	= -I@BUILDLINK_DIR@/include -I@BUILDLINK_X11_DIR@/include
 
 # Compiline YACC output
 SYSCONF_CFLAGS_YACC     = -Wno-unused -Wno-parentheses
 
 # X11
-SYSCONF_LFLAGS_X11	= -L/usr/X11R6/lib
-SYSCONF_LIBS_X11	= -lX11 -lXext
+SYSCONF_LFLAGS_X11	= -L@BUILDLINK_X11_DIR@/lib
+SYSCONF_LIBS_X11	= -lXext -lX11 -lm
 # Qt, Qt+OpenGL
 SYSCONF_LFLAGS_QT	= -L$(QTDIR)/lib
 SYSCONF_LIBS_QT		= -lqt
-#static# SYSCONF_LIBS_QT		= -lqt -lpng -lz
-#SYSCONF_LIBS_QT_OPENGL	= -lqgl
+SYSCONF_LIBS_QT_OPENGL	= 
 # OpenGL
-#SYSCONF_LFLAGS_OPENGL	= -L/usr/X11R6/lib
-#SYSCONF_LIBS_OPENGL	= -lMesaGL -lMesaGLU -lXmu -lXext -lm
+SYSCONF_LFLAGS_OPENGL	= -L@BUILDLINK_DIR@/lib -L@BUILDLINK_X11_DIR@/lib
+SYSCONF_LIBS_OPENGL	= -lGL -lGLU -lXmu
 
 # Linking applications
-SYSCONF_LINK		= g++
-SYSCONF_LFLAGS		=
-#static# SYSCONF_LFLAGS		= -static
+SYSCONF_LINK		= ${CXX}
+SYSCONF_LFLAGS		= ${LDFLAGS}
 SYSCONF_LIBS		= 
 
 # Link flags shared objects
 SYSCONF_LFLAGS_SHOBJ	= -shared
 
 # Meta-object compiler
-SYSCONF_MOC		= /usr/bin/moc
+SYSCONF_MOC		= ${QTDIR}/bin/moc
 
 # Linking shared libraries
 #   - Build the $(TARGET) library, eg. lib$(TARGET).so.0.0
 #   - Place target in $(DESTDIR) - which has a trailing /
 #   - Usually needs to incorporate $(VER_MAJ) and $(VER_MIN)
 #
-SYSCONF_LINK_SHLIB	= g++
+SYSCONF_LINK_SHLIB	= ${CXX} 
 SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
 SYSCONF_LINK_LIB_SHARED	=  $(SYSCONF_LINK_SHLIB) -shared -Wl,-soname,lib$(TARGET).so.$(VER_MAJ) \
 				     $(LFLAGS) -o $(SYSCONF_LINK_TARGET_SHARED) \
@@ -90,11 +68,11 @@
 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC)
 # Compiling application source
 #SYSCONF_CFLAGS		= -Wall -g $(OPTIONS)
-SYSCONF_CFLAGS		= -O2 -Wall $(OPTIONS)
+SYSCONF_CFLAGS		= ${CXXFLAGS} $(OPTIONS)
 # Compiling library source
-SYSCONF_CFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CFLAGS_LIB	= ${CXXFLAGS} -fno-strength-reduce -fPIC
 # Compiling shared-object source
-SYSCONF_CFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CFLAGS_SHOBJ	= ${CXXFLAGS} -fno-strength-reduce -fPIC
 # Default link type (stati linking is still be used where required)
 SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_SHARED)
 SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_SHARED)
