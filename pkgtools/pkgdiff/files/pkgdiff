#!/bin/sh
#
# $NetBSD: pkgdiff,v 1.1.1.1 2000/06/28 01:42:42 wiz Exp $
#
# Id: pkgdiff,v 1.4 2000/05/14 01:04:54 feyrer Exp feyrer 
#
# Usage: pkgdiff oldfile newfile
#
# Will output a patch ready for the NetBSD Pkgs Collection (unified
# diff, plus no RCS IDs if possible). 
#
# Copyright (c) 2000 by Hubert Feyrer <hubertf@netbsd.org>
# All Rights Reserved.  Absolutely no warranty.  
#

echo '$'NetBSD'$'
echo ''

lines=3
while [ `diff -u -$lines $@ | egrep -c '\\$(NetBSD|Author|Date|Header|Id|Locker|Log|Name|RCSfile|Revision|Source|State)'`  !=  0 ]
do
	lines=`expr $lines - 1`
	if [ $lines = 0 ]; then
		echo "Cannot strip away RCS IDs, please handle manually!"
		exit 1
	fi
done

diff -u -$lines $@
