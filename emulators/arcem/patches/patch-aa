$NetBSD: patch-aa,v 1.1.1.1 2002/03/31 21:41:31 cjep Exp $

--- Makefile.orig	Tue Aug  3 21:00:16 1999
+++ Makefile	Sun Mar 31 21:34:25 2002
@@ -22,13 +22,10 @@
 #Default endianness of the emulated processor (LITTLEEND or BIGEND)
 ENDIAN=LITTLEEND
 
-prefix=/usr/local
-CC = /home/dg/egcs/bin/gcc
-# add -DHOST_BIGENDIAN for big endian hosts, eg. sun, sgi, hp
-CFLAGS = -O6 -D$(ENDIAN) $(CFL) -Wall -Wno-return-type -DNOOS -DNOFPE -I/usr/X11/include
-#CFLAGS = -g -D$(ENDIAN) $(CFL) -Wall -DNOOS -DNOFPE -I/usr/X11/include -DBENCHMARKEXIT
-INSTALL_DIR = $(prefix)/bin
-INSTALL=cp
+CFLAGS = -O6 -D$(ENDIAN) $(CFL) -Wall -Wno-return-type \
+			-DNOOS -DNOFPE -I${X11BASE}/include
+
+INSTALL_DIR = ${PREFIX}/bin
 
 # Everything else should be ok as it is.
 
@@ -56,10 +53,11 @@
 all: armul-arc
 
 install: all
-	$(INSTALL) armul $(INSTALL_DIR)
+	$(INSTALL) armul-arc $(INSTALL_DIR)
 
 armul-arc: $(OBJS) $(MODEL).o
-	$(CC) $(CFLAGS) $(OBJS) $(MODEL).o -o $@ -L/usr/X11/lib -lm -lXext -lX11
+	$(CC) $(CFLAGS) $(OBJS) $(MODEL).o -o $@ -Wl,-R${X11BASE}/lib \
+			-L${X11BASE}/lib -lm -lXext -lX11
 
 clean:
 	rm -f *.o arch/*.o armul-arc core *.bb *.bbg *.da
