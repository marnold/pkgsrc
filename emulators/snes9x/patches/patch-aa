$NetBSD: patch-aa,v 1.1.1.1 2000/11/09 16:43:40 wiz Exp $

--- Makefile.orig	Mon Jan 24 16:15:50 2000
+++ Makefile
@@ -4,7 +4,7 @@
 NETPLAY=1
 UNZIP=1
 #GLIDE=1
-THREAD_SOUND=1
+#THREAD_SOUND=1
 
 ifdef ZSNESFX
 FXOBJ=i386/fxemu2b.o i386/fxemu2.o i386/fxemu2c.o i386/fxtable.o i386/sfxproc.o i386/zsnes.o
@@ -70,7 +70,7 @@
 CC = gcc
 NASM = nasm
 
-INCLUDES=-I/usr/X11R6/include -I/usr/local/include
+INCLUDES=-I${X11BASE}/include
 
 OPTIMISE=-O6 -mpentium -fomit-frame-pointer -fno-exceptions
 
@@ -78,7 +78,6 @@
 -Ii386 \
 -I. \
 -Iunzip \
--DJOYSTICK_SUPPORT \
 -DZLIB \
 -DNO_INLINE_SET_GET \
 -DVAR_CYCLES \
@@ -108,7 +107,7 @@
 # system using the egcs compiler get an undefined __register_frame_info
 # symbol error when run on a Redhat box.
 
-LDLIBS = -L/usr/X11R6/lib frame.o
+LDLIBS = -L${X11BASE}/lib -Wl,-R${X11BASE}/lib
 
 ifdef GLIDE
 ifdef NETPLAY
@@ -118,9 +117,9 @@
 endif
 else
 ifdef NETPLAY
-all: offsets snes9x ssnes9x s9xserver
+all: offsets snes9x s9xserver
 else
-all: offsets snes9x ssnes9x
+all: offsets snes9x
 endif
 endif
 
@@ -170,7 +169,7 @@
 	$(CCC) $(INCLUDES) -c -E $(CCFLAGS) $*.S -o $@
 
 .asm.o:
-	$(NASM) -f elf -i . -i i386 -o $@ $*.asm
+	$(NASM) -f ${FILEFORMAT} -i . -i i386 -o $@ $*.asm
 
 clean:
 	rm -f $(OBJECTS) offsets.o unix/svga.o unix/x11.o unix/ggi.o unix/xf86.o
