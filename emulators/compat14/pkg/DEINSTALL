#!/bin/sh
#
# $NetBSD: DEINSTALL,v 1.1.1.1 2001/02/04 08:03:39 mrg Exp $

PKGNAME=$1
STAGE=$2

case ${STAGE} in
DEINSTALL)
	;;
POST-DEINSTALL)
	MACHINE_ARCH=@MACHINE_ARCH@
	COMPAT_LIBDIR=@COMPAT_LIBDIR@
	COMPAT_XLIBDIR=@COMPAT_XLIBDIR@

	if [ "${MACHINE_ARCH}" = "mipsel" ]
	then
		rm -f ${PKG_PREFIX}/libexec/ld.so
		rmdir -p ${PKG_PREFIX}/libexec 2>/dev/null || true
	fi

	rmdir -p ${PKG_PREFIX}/${COMPAT_LIBDIR} ${PKG_PREFIX}/${COMPAT_XLIBDIR} 2>/dev/null || true

	# Regenerate the shared library cache.  This should work on either
	# a.out or on ELF with the 1.5 release.
	#
	( @LDCONFIG@ || true ) >/dev/null 2>&1
	;;
*)
	echo "Unexpected argument: ${STAGE}"
	exit 1
	;;
esac
exit 0
