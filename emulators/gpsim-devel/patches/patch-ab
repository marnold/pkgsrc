$NetBSD: patch-ab,v 1.1.1.1 2004/11/29 20:51:51 bouyer Exp $

Index: src/stimuli.cc
===================================================================
RCS file: /cvsroot/gpsim/src/stimuli.cc,v
retrieving revision 1.59
diff -u -r1.59 stimuli.cc
--- src/stimuli.cc	26 Aug 2004 14:37:03 -0000	1.59
+++ src/stimuli.cc	4 Nov 2004 22:06:02 -0000
@@ -1325,6 +1325,8 @@
 
 double IO_open_collector::get_Zth()
 {
+  if(iop)
+    digital_state = (iop->value.get() & (1<<iobit)) ? true : false;
   return (driving && !digital_state) ? Zth : ZthIn;
 
 }
