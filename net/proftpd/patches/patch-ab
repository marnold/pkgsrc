$NetBSD: patch-ab,v 1.4.4.1 2006/12/18 14:28:32 ghen Exp $

--- configure.orig	2006-12-06 18:56:47.000000000 +0000
+++ configure	2006-12-14 10:29:56.000000000 +0000
@@ -20399,16 +20399,95 @@
 _ACEOF
 
 
+cat >>confdefs.h <<\_ACEOF
+#define PR_USE_NLS 1
+_ACEOF
 
-fi
+         ENABLE_NLS="1"
 
+else
+  echo "$as_me:$LINENO: checking for bindtextdomain in -lc" >&5
+echo $ECHO_N "checking for bindtextdomain in -lc... $ECHO_C" >&6
+if test "${ac_cv_lib_c_bindtextdomain+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lc  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
 
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char bindtextdomain ();
+int
+main ()
+{
+bindtextdomain ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"
+			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_c_bindtextdomain=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_lib_c_bindtextdomain=no
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_c_bindtextdomain" >&5
+echo "${ECHO_T}$ac_cv_lib_c_bindtextdomain" >&6
+if test $ac_cv_lib_c_bindtextdomain = yes; then
 
 cat >>confdefs.h <<\_ACEOF
 #define PR_USE_NLS 1
 _ACEOF
 
-      ENABLE_NLS="1"
+           ENABLE_NLS="1"
+
+else
+  { { echo "$as_me:$LINENO: error: libintl support, required for NLS, not present -- aborting" >&5
+echo "$as_me: error: libintl support, required for NLS, not present -- aborting" >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+
+
+fi
+
     fi
 
 fi;
@@ -36608,7 +36687,7 @@
 _ACEOF
 
 cat >>confdefs.h <<_ACEOF
-#define PR_RUN_DIR "`eval echo "${localstatedir}/proftpd"`"
+#define PR_RUN_DIR "`eval echo "${localstatedir}/run"`"
 _ACEOF
 
 cat >>confdefs.h <<_ACEOF
@@ -36616,7 +36695,7 @@
 _ACEOF
 
 cat >>confdefs.h <<_ACEOF
-#define PR_PID_FILE_PATH "`eval echo "${localstatedir}/proftpd.pid"`"
+#define PR_PID_FILE_PATH "`eval echo "${localstatedir}/run/proftpd.pid"`"
 _ACEOF
 
 
