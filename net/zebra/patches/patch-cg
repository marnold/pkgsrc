$NetBSD: patch-cg,v 1.1.2.2 2002/08/25 21:20:54 jlam Exp $

diff -u1 ospf6d/ospf6_lsa.c /home/itojun/work/zebra/zebra/ospf6d/ospf6_lsa.c
--- ospf6d/ospf6_lsa.c	Mon Jul  8 22:31:02 2002
+++ /home/itojun/work/zebra/zebra/ospf6d/ospf6_lsa.c	Sat Aug  3 21:06:08 2002
@@ -777,2 +777,3 @@
   struct ospf6_lsdb *lsdb = NULL;
+  void (*hook) (struct ospf6_lsa *, struct ospf6_lsa *);
 
@@ -806,8 +807,7 @@
 
-#if 0
-      if (lsdb->hook)
-        (*lsdb->hook) (lsa, NULL);
-#else /*0*/
-      CALL_REMOVE_HOOK (&database_hook, lsa);
-#endif /*0*/
+      /* call LSDB hook to re-process LSA */
+      hook = ospf6_lsdb_hook[ntohs (lsa->header->type) &
+                             OSPF6_LSTYPE_CODE_MASK].hook;
+      if (hook)
+        (*hook) (NULL, lsa);
 
