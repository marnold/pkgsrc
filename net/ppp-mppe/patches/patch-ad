$NetBSD: patch-ad,v 1.1.1.1 1999/10/08 04:34:43 dbj Exp $

Index: pppd/demand.c
diff -u pppd/demand.c:1.1.1.5 pppd/demand.c:1.9
--- pppd/demand.c:1.1.1.5	Tue Aug 24 13:25:44 1999
+++ pppd/demand.c	Tue Aug 24 19:07:42 1999
@@ -89,7 +100,8 @@
     ppp_recv_config(0, PPP_MRU, (u_int32_t) 0, 0, 0);
 
 #ifdef PPP_FILTER
-    set_filters(&pass_filter, &active_filter);
+    set_filters(&pass_filter_in, &pass_filter_out,
+		&active_filter_in, &active_filter_out);
 #endif
 
     /*
@@ -330,8 +342,8 @@
 	return 0;
     proto = PPP_PROTOCOL(p);
 #ifdef PPP_FILTER
-    if (active_filter.bf_len != 0
-	&& bpf_filter(active_filter.bf_insns, frame, len, len) == 0)
+    if (active_filter_out.bf_len != 0
+	&& bpf_filter(active_filter_out.bf_insns, frame, len, len) == 0)
 	return 0;
 #endif
     for (i = 0; (protp = protocols[i]) != NULL; ++i) {
