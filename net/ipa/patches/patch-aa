$NetBSD: patch-aa,v 1.1.1.1 2001/10/21 22:50:01 mjl Exp $

--- Makefile.orig	Wed Oct  3 18:27:19 2001
+++ Makefile	Wed Oct 10 20:09:57 2001
@@ -38,32 +38,32 @@
 #	-Ox   - optimize (it seems that -O3 also help to find out some errors);
 #	-g    - produce debugging information.
 #
-CFLAGS=		-Wall -O -g
+#CFLAGS=		-Wall -O -g
 
 #
 # DSTBINDIR - where to install binaries
 #
-DSTBINDIR=	/usr/local/bin
+DSTBINDIR=	${PREFIX}/bin
 
 #
 # DSTMANDIR - where to install manuals
 #
-DSTMANDIR=	/usr/local/man
+DSTMANDIR=	${PREFIX}/man
 
 #
 # DSTETCDIR - where to install template configuration
 #
-DSTETCDIR=	/usr/local/etc
+DSTETCDIR=	${PREFIX}/etc
 
 #
 # DSTRCDIR - where to install sample rc-script
 #
-DSTRCDIR=	/usr/local/etc/rc.d
+DSTRCDIR=	${PREFIX}/etc/rc.d
 
 #
 # DSTSHAREDIR - where to install examples, etc.
 #
-DSTSHAREDIR=	/usr/local/share/ipa
+DSTSHAREDIR=	${PREFIX}/share/examples/ipa
 
 #
 # IP6FW (FreeBSD only)
@@ -204,10 +204,10 @@
 	@${ECHO}
 .else
 	@${ECHO} ">> Installing binaries, manual pages and miscellaneous files"
-	${INSTALL} -c -g wheel -o root -m 0555 ipa ipastat ${DSTBINDIR}
+	${BSD_INSTALL_PROGRAM} ipa ipastat ${DSTBINDIR}
 	${CHMOD} u+s ${DSTBINDIR}/ipastat
-	${INSTALL} -c -g wheel -o root -m 0444 man/ipa.5 man/ipa.conf.5 ${DSTMANDIR}/man5
-	${INSTALL} -c -g wheel -o root -m 0444 man/ipa.8 man/ipastat.8 ${DSTMANDIR}/man8
+	${BSD_INSTALL_MAN} man/ipa.5 man/ipa.conf.5 ${DSTMANDIR}/man5
+	${BSD_INSTALL_MAN} man/ipa.8 man/ipastat.8 ${DSTMANDIR}/man8
 .if !exists(${DSTMANDIR}/ru_SU.KOI8-R/man5)
 	${INSTALL} -d -m 0555 ${DSTMANDIR}/ru_SU.KOI8-R/man5
 .endif
@@ -217,12 +217,12 @@
 .if !exists(${DSTMANDIR}/ru_RU.KOI8-R)
 	${LN} -s ${DSTMANDIR}/ru_SU.KOI8-R ${DSTMANDIR}/ru_RU.KOI8-R
 .endif
-	${INSTALL} -c -g wheel -o root -m 0444 man/ru_RU.KOI8-R/ipa.5 man/ru_RU.KOI8-R/ipa.conf.5 ${DSTMANDIR}/ru_RU.KOI8-R/man5
-	${INSTALL} -c -g wheel -o root -m 0444 man/ru_RU.KOI8-R/ipa.8 man/ru_RU.KOI8-R/ipastat.8 ${DSTMANDIR}/ru_RU.KOI8-R/man8
-	${INSTALL} -d -m 0555 ${DSTSHAREDIR}/examples
-	${INSTALL} -c -g wheel -o root -m 0444 examples/* ${DSTSHAREDIR}/examples
+	${BSD_INSTALL_MAN} man/ru_RU.KOI8-R/ipa.5 man/ru_RU.KOI8-R/ipa.conf.5 ${DSTMANDIR}/ru_RU.KOI8-R/man5
+	${BSD_INSTALL_MAN} man/ru_RU.KOI8-R/ipa.8 man/ru_RU.KOI8-R/ipastat.8 ${DSTMANDIR}/ru_RU.KOI8-R/man8
+	${INSTALL} -d -m 0555 ${DSTSHAREDIR}
+	${BSD_INSTALL_DATA} examples/* ${DSTSHAREDIR}
 .if exists(${DSTRCDIR})
-	${INSTALL} -c -g wheel -o root -m 0500 etc/ipa.sh.sample ${DSTRCDIR}
+	${BSD_INSTALL_SCRIPT} etc/ipa.sh.sample ${DSTRCDIR}
 .else
 	@${ECHO}
 	@${ECHO} ">> Can't find directory ${DSTRCDIR}, skip installing of ipa.sh.sample"
@@ -230,7 +230,7 @@
 	@${ECHO}
 .endif
 .if exists(${DSTETCDIR})
-	${INSTALL} -c -g wheel -o root -m 0400 etc/ipa.conf.default ${DSTETCDIR}
+	${BSD_INSTALL_DATA} etc/ipa.conf.default ${DSTETCDIR}
 .else
 	@${ECHO}
 	@${ECHO} ">> Can't find directory ${DSTETCDIR}, skip installing of ipa.conf.default"
