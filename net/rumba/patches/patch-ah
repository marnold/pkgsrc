*** proc.c.orig	Sat Jul  5 20:26:58 1997
--- proc.c	Sat Jul  5 20:48:56 1997
***************
*** 920,926 ****
  
          smb_lock_server(server);
  
-  retry:
          p = smb_setup_header(server, SMBwrite, 5, 3);
          WSET(buf, smb_vwv0, fid);
          WSET(buf, smb_vwv1, 0);
--- 920,925 ----
***************
*** 928,938 ****
          WSET(buf, smb_vwv4, 0);
          smb_encode_ascii(p, "", 0);
          
!         if ((result = smb_request_ok(server, SMBwrite, 1, 0)) < 0) {
!                 if (smb_retry(server)) {
!                         goto retry;
!                 }
!         }
          smb_unlock_server(server);
          return result;
  }
--- 927,934 ----
          WSET(buf, smb_vwv4, 0);
          smb_encode_ascii(p, "", 0);
          
!         result = smb_request_ok(server, SMBwrite, 1, 0);
! 
          smb_unlock_server(server);
          return result;
  }
