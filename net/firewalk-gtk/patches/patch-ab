$NetBSD: patch-ab,v 1.1.1.1 2001/10/11 15:13:49 agc Exp $

--- Makefile.in.orig	Sat Feb  3 20:24:09 2001
+++ Makefile.in	Thu Oct 11 15:58:01 2001
@@ -6,23 +6,23 @@
 #
 #   @configure_input@
 
-FIREWALK    =   firewalk
-FIREWALK_LOC=   /usr/local
+FIREWALK    =   firewalk-gtk
+FIREWALK_LOC?=  /usr/local
 FIREWALK_MAN=   $(FIREWALK).1
 INSTALL     =   ./install-sh
 DEFINES     +=  @DEFS@ `libnet-config --defines`
 CFLAGS      =   @CFLAGS@
 CPPFLAGS    =   @CPPFLAGS@
-LIBS        =   -lnet -lpcap @FW_GTK_CONFIG@ `libnet-config --libs`
+LIBS        +=  -lnet -lpcap @FW_GTK_CONFIG@ `libnet-config --libs`
 OBJECTS     =   main.o firewalk.o watcher.o p_cap.o signal.o \
 		packet.o udptcpwalk.o port_list.o util.o @FW_GTK_OBJS@
 
 .c.o:
 	$(CC) $(CFLAGS) $(CPPFLAGS) $(DEFINES) -c $< -o $@
 
-all: firewalk
+all: ${FIREWALK}
 
-firewalk: version.h $(OBJECTS)
+${FIREWALK}: version.h $(OBJECTS)
 	$(CC) $(CFLAGS) $(OBJECTS) -o $(FIREWALK) $(LIBS)
 
 version.o: version.h
@@ -30,8 +30,9 @@
 	@rm -f $@
 	sed -e 's/.*/static char version[] = "&";/' ./VERSION > $@
 
-install: firewalk
-	$(INSTALL) -c -m 0700 $(FIREWALK) $(FIREWALK_LOC)/bin
+install: ${FIREWALK}
+	$(INSTALL) -d -m 0755 $(FIREWALK_LOC)/bin $(FIREWALK_LOC)/man/man1
+	$(INSTALL) -c -m 0700 $(FIREWALK) $(FIREWALK_LOC)/bin/
 	$(INSTALL) -c -m 0644 $(FIREWALK_MAN) $(FIREWALK_LOC)/man/man1
 
 clean:
