$NetBSD: patch-aa,v 1.1.1.1 2002/01/22 22:00:22 jlam Exp $

--- authlib/Makefile.in.orig	Fri Jan 18 22:04:42 2002
+++ authlib/Makefile.in
@@ -1823,6 +1823,30 @@
 	$(MAKE) $(AM_MAKEFLAGS) all-recursive
 
 install-exec-am:
+	for d in $(sbindir) $(libexecdir) $(libexecdir)/authlib; do $(mkinstalldirs) $(DESTDIR)$$d || exit 1; done
+	for f in `cat ../authlib/installlist`; do test -z "$$f" && continue; \
+		test -f ../authlib/$$f || continue; \
+		$(INSTALL_PROGRAM) $(INSTALL_STRIP_FLAG) ../authlib/$$f \
+			$(DESTDIR)$(libexecdir)/authlib/$$f ; done
+	for f in `cat ../authlib/installlist.sh`; do test -z "$$f" && continue; \
+		test -f ../authlib/$$f || continue; \
+		$(INSTALL_SCRIPT) ../authlib/$$f \
+			$(DESTDIR)$(libexecdir)/authlib/$$f ; done
+	for f in makeuserdb userdb pw2userdb vchkpw2userdb ; do rm -f $(DESTDIR)$(sbindir)/$$f ; \
+		$(LN_S) $(datadir)/$$f $(DESTDIR)$(sbindir)/$$f ; done
+	$(mkinstalldirs) $(DESTDIR)@authchangepwdir@
+	. ../authlib/authpwdprogs ; for f in `echo $$PWPROGS dummy` ; do \
+		test "$$f" = "dummy" && continue ; \
+		$(INSTALL_PROGRAM) ../authlib/$$f \
+			$(DESTDIR)@authchangepwdir@/$$f ; done
+	. ../authlib/authpwdprogs ; for f in `echo $$PWSCRIPTS dummy` ; do \
+		test "$$f" = "dummy" && continue ; \
+		$(INSTALL_SCRIPT) ../authlib/$$f \
+			$(DESTDIR)$(datadir)/$$f ; \
+		rm -f $(DESTDIR)@authchangepwdir@/$$f ; \
+		$(LN_S) $(datadir)/$$f \
+			$(DESTDIR)@authchangepwdir@/$$f ; done
+
 install-exec: install-exec-am
 
 install-data-am: install-man install-data-local
@@ -2068,7 +2092,6 @@
 		for f in $(man_LINKS) "" ; do \
 			test "$$f" = "" && continue ; \
 			rm -f $$f; $(LN_S) authlib.7 $$f ; \
-			test -w /etc && chown bin $$f && chgrp bin $$f ; \
 			done ; exit 0
 
 uninstall-local: uninstall-authldaprc uninstall-authdaemonrc uninstall-authmysqlrc uninstall-authpgsqlrc
