$NetBSD: patch-aa,v 1.1.1.1 2002/08/23 15:28:17 bouyer Exp $

--- configure.orig	Thu Jul 25 15:34:56 2002
+++ configure	Thu Jul 25 15:38:02 2002
@@ -1245,8 +1245,8 @@
 
 
 # Now make sure that $prefix is set up correctly.  It must be group
-# owned by `mailman', it must have the group sticky bit set, and it
-# must be a+rx
+# owned by `mailman', and it must be a+rx. ${VAR_PREFIX} is not created at this
+# time so don't check it
 if test "$VAR_PREFIX" = "NONE"
 then
     VAR_PREFIX=$ac_default_prefix
@@ -1254,50 +1254,6 @@
 else
     prefixcheck=$VAR_PREFIX
 fi
-
-echo $ac_n "checking permissions on $prefixcheck""... $ac_c" 1>&6
-echo "configure:1260: checking permissions on $prefixcheck" >&5
-
-cat > conftest.py <<EOF
-import os, grp, string
-from stat import *
-prefix = "$prefixcheck"
-mailmangid = $MAILMAN_GID
-problems = []
-try: statdata = os.stat(prefix)
-except os.error:
-    problems.append("Directory doesn't exist: " + prefix)
-else:    
-    mode = statdata[ST_MODE]
-    gid = statdata[ST_GID]
-    if mailmangid <> gid:
-	problems.append("Directory must be owned by group mailman: " + prefix)
-    if (mode & S_ISGID) <> S_ISGID:
-	problems.append("Set-gid bit must be set for directory: " +prefix)
-    perms = S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH
-    if (mode & perms) <> perms:
-	problems.append("Permissions should be at least 02775: " + prefix)
-if not problems:
-    msg = "okay\n"
-else:
-    msg = '***** ' + string.join(problems, '\n***** ') + '\n'
-fp = open("conftest.out", "w")
-fp.write(msg)
-fp.close()
-EOF
-
-$PYTHON conftest.py
-status=`cat conftest.out`
-rm -f conftest.out conftest.py
-if test "$status" != "okay"
-then
-    { echo "configure: error: 
-***** Installation directory $prefixcheck is not configured properly!
-$status" 1>&2; exit 1; }
-fi
-
-echo "$ac_t""okay" 1>&6
-
 
 # Now find the UIDs and GIDs
 # Support --with-mail-gid and --with-cgi-gid
