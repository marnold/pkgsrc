$NetBSD: patch-ag,v 1.1.1.1 2004/08/30 19:56:46 adrianp Exp $

--- include/sm/conf.h.orig	2004-01-07 13:52:16.000000000 +1300
+++ include/sm/conf.h
@@ -780,7 +780,11 @@ extern unsigned int sleepX __P((unsigned
 #  ifndef LA_TYPE
 #   define LA_TYPE	LA_SUBR
 #  endif /* ! LA_TYPE */
+#if defined(__NetBSD__) && (__NetBSD_Version__ > 200030000)
+#  define SFS_TYPE	SFS_STATVFS	/* use <sys/statvfs.h> statfs() impl */
+#else
 #  define SFS_TYPE	SFS_MOUNT	/* use <sys/mount.h> statfs() impl */
+#endif
 #  define SPT_TYPE	SPT_PSSTRINGS	/* use PS_STRINGS pointer */
 # endif /* defined(BSD4_4) && !defined(__bsdi__) && !defined(__GNU__) */
 
@@ -894,7 +898,11 @@ extern unsigned int sleepX __P((unsigned
 #  ifndef LA_TYPE
 #   define LA_TYPE	LA_SUBR
 #  endif /* ! LA_TYPE */
+#if defined(__NetBSD__) && (__NetBSD_Version__ > 200030000)
+#  define SFS_TYPE	SFS_STATVFS	/* use <sys/statvfs.h> statfs() impl */
+#else
 #  define SFS_TYPE	SFS_MOUNT	/* use <sys/mount.h> statfs() impl */
+#endif
 #  if defined(__NetBSD__) && (NetBSD > 199307 || NetBSD0_9 > 1)
 #   undef SPT_TYPE
 #   define SPT_TYPE	SPT_BUILTIN	/* setproctitle is in libc */
@@ -902,6 +910,9 @@ extern unsigned int sleepX __P((unsigned
 #  if defined(__NetBSD__) && ((__NetBSD_Version__ > 102070000) || (NetBSD1_2 > 8) || defined(NetBSD1_4) || defined(NetBSD1_3))
 #   define HASURANDOMDEV	1	/* has /dev/urandom(4) */
 #  endif /* defined(__NetBSD__) && ((__NetBSD_Version__ > 102070000) || (NetBSD1_2 > 8) || defined(NetBSD1_4) || defined(NetBSD1_3)) */
+#  if defined(__NetBSD__)
+#   define SMRSH_CMDDIR		"/usr/libexec/sm.bin"
+#  endif /* defined(__NetBSD__) */
 #  if defined(__FreeBSD__)
 #   define HASSETLOGIN	1	/* has setlogin(2) */
 #   if __FreeBSD_version >= 227001
