$NetBSD: patch-aa,v 1.1.1.1 2004/02/24 23:03:52 cube Exp $

--- Makefile.orig	Tue Aug  7 10:06:13 2001
+++ Makefile
@@ -5,14 +5,16 @@
 IMLIB_LIB = `imlib-config --libs-gdk`
 
 
-FLAGS = -O2 -Wall -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE)
+CFLAGS += -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE) -I${PREFIX}/include
 LIBS = $(GTK_LIB) $(IMLIB_LIB)
 LFLAGS = -shared
 
-CC = gcc $(CFLAGS) $(FLAGS)
+CC = gcc $(CFLAGS)
 
 OBJS = gkrellstock.o
 
+all: gkrellstock.so
+
 gkrellstock.so: $(OBJS)
 	$(CC) $(OBJS) -o gkrellstock.so $(LFLAGS) $(LIBS)  -lpthread
 
@@ -22,23 +24,10 @@
 gkrellstock.o: gkrellstock.c
 
 install:
-	if [ -d /usr/lib/gkrellm/plugins/ ] ; then \
-		install -c -s -m 644 gkrellstock.so /usr/lib/gkrellm/plugins/ ; \
-	elif [ -d /usr/share/gkrellm/plugins/ ] ; then \
-		install -c -s -m 644 gkrellstock.so /usr/share/gkrellm/plugins/ ; \
-	elif [ -d /usr/local/lib/gkrellm/plugins/ ] ; then \
-		install -c -s -m 644 gkrellstock.so /usr/local/lib/gkrellm/plugins/ ; \
-	elif [ -d /usr/lib/gkrellm/plugins/ ] ; then \
-		install -c -s -m 644 gkrellstock.so /usr/lib/gkrellm/plugins/ ; \
-	else \
-		install -D -c -s -m 644 gkrellstock.so /usr/lib/gkrellm/plugins/gkrellstock.so ; \
-	fi
-	install -c -m 755 GetStock /usr/X11R6/bin
+	install -c -s -m 644 gkrellstock.so ${PREFIX}/lib/gkrellm/plugins
+	install -c -m 755 GetQuote ${PREFIX}/bin
 
 uninstall:
-	rm -f /usr/lib/gkrellm/plugins/gkrellstock.so
-	rm -f /usr/share/gkrellm/plugins/gkrellstock.so
-	rm -f /usr/local/lib/gkrellm/plugins/gkrellstock.so
-	rm -f /usr/lib/gkrellm/plugins/gkrellstock.so
-	rm -f /usr/X11R6/bin/GetQuote
+	rm -f ${PREFIX}/lib/gkrellm/plugins/gkrellstock.so
+	rm -f ${PREFIX}/bin/GetQuote
 
