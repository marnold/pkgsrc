$NetBSD: patch-ac,v 1.4.4.1 2005/04/16 15:47:16 salo Exp $

--- modules/cdda-cddb.c.orig	2004-07-25 15:40:35.000000000 +0000
+++ modules/cdda-cddb.c
@@ -440,7 +440,7 @@ CDDBDoQuery (cdrom_drive *cd_desc, CDDBS
     query->query_match=MATCH_INEXACT;
     query->query_matches=0;
 
-    while(!CDDBReadLine(socket,inbuffer,256)) {
+    while(query->query_matches < MAX_INEXACT_MATCHES && !CDDBReadLine(socket,inbuffer,256)) {
       query->query_list[query->query_matches].list_genre=
 	CDDBGenreValue(ChopWhite(strtok(inbuffer," ")));
       
