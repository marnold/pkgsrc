$NetBSD: patch-aa,v 1.1.1.1 2004/02/24 22:06:57 cube Exp $

--- Makefile.top_enable_nls.orig	Wed Dec  5 08:41:15 2001
+++ Makefile.top_enable_nls
@@ -31,8 +31,11 @@
 # Default
 #--------
 GTK_CONFIG = gtk-config
+IMLIB_CONFIG = imlib-config
 EXTRAOBJS = md5c.o
 BINMODE = 755
+BINGRP = wheel
+PREFIX ?= /usr/local
 
 # FreeBSD 2.X
 #------------
@@ -53,12 +56,17 @@
 
 # NetBSD or OpenBSD
 #------------------
-#GTK_CONFIG= gtk-config
-#GTOP_LIBS=
-#PTHREAD_INC=-I/usr/local/include
-#SYS_LIBS=-lkvm
-#EXTRAOBJS =
-#BINMODE=2755
+GTK_CONFIG ?= gtk-config
+IMLIB_CONFIG ?= imlib-config
+GTOP_INCLUDE =
+GTOP_LIBS =
+PTHREAD_INC ?= -I/usr/pkg/include
+EXTRAOBJS =
+LINK_FLAGS = $(EXPORT_SYMBOLS_LDFLAGS)
+LOCALEDIR = ${PREFIX}/share/locale
+MANDIR = ${PREFIX}/man/man1
+BINMODE = 2755
+BINGRP = kmem
 
 # Solaris 2.x
 #------------
@@ -75,21 +83,23 @@
 # used if you "make gnome-gtop" or "make gtop".
 #-----------------------------------
 GTOP_PREFIX = /usr
-GTOP_INCLUDE = -I$(GTOP_PREFIX)/include
-GTOP_LIBS = -L$(GTOP_PREFIX)/lib -lgtop -lgtop_common -lgtop_sysdeps -lXau
+GTOP_INCLUDE ?= -I$(GTOP_PREFIX)/include
+GTOP_LIBS ?= -L$(GTOP_PREFIX)/lib -lgtop -lgtop_common -lgtop_sysdeps -lXau
 
 
-INSTALLDIR=/usr/local/bin
-MANDIR=/usr/local/share/man/man1
+PREFIX ?= /usr/local
+INSTALLDIR ?= ${PREFIX}/bin
+MANDIR ?= ${PREFIX}/share/man/man1
 MANMODE = 644
 MANDIRMODE = 755
-INCLUDEDIR=/usr/local/include
+INCLUDEDIR ?= ${PREFIX}/include
 INCLUDEMODE = 644
 INCLUDEDIRMODE = 755
 
 LOCALEDIR ?= /usr/share/locale
 
 export GTK_CONFIG GTOP_INCLUDE GTOP_LIBS SYS_LIBS EXTRAOBJS BINMODE
+export BINGRP IMLIB_CONFIG LINK_FLAGS PREFIX
 export INSTALLDIR INCLUDEDIR INCLUDEMODE INCLUDEDIRMODE LOCALEDIR
 export MANDIR MANDIRMODE MANMODE
 
@@ -132,9 +142,7 @@
 
 netbsd:
 	(cd po && ${MAKE} all)
-	(cd src && ${MAKE} GTK_CONFIG=gtk-config GTOP_LIBS= GTOP_INCLUDE= \
-		PTHREAD_INC=-I/usr/local/include EXTRAOBJS= \
-		SYS_LIBS="-lkvm" gkrellm )
+	(cd src && ${MAKE} SYS_LIBS="-lkvm" gkrellm )
 
 openbsd:
 	(cd po && ${MAKE} all)
