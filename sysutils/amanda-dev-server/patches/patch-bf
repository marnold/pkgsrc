$NetBSD: patch-bf,v 1.2.2.1 2002/06/23 18:59:40 jlam Exp $

--- changer-src/scsi-changer-driver.c.orig	Sun Feb 10 13:49:51 2002
+++ changer-src/scsi-changer-driver.c	Mon Jun  3 22:31:54 2002
@@ -1318,13 +1318,14 @@
 {
   int ret = 0;
   extern OpenFiles_T *pDev;
+  extern changer_t chg;         /* Needed for the infos about havebarcode */
 
   DebugPrint(DEBUG_INFO, SECTION_BARCODE,"##### START BarCode\n");
   DebugPrint(DEBUG_INFO, SECTION_BARCODE,"%-20s : fd %d\n", "BarCode", fd);
 
   DebugPrint(DEBUG_INFO, SECTION_BARCODE,"Ident = [%s], function = [%s]\n", pDev[fd].ident,
 	     pDev[fd].functions->ident);
-  ret = pDev[fd].functions->function_barcode(fd);
+  ret = (pDev[fd].functions->function_barcode(fd) | chg.havebarcode);
   DebugPrint(DEBUG_INFO, SECTION_BARCODE,"##### STOP BarCode (%d)\n",ret);
   return(ret);
 }
