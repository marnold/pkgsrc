$NetBSD: patch-aa,v 1.1.1.1 2002/07/03 09:27:00 dmcmahill Exp $

--- configure.orig	Fri Jun 28 14:26:26 2002
+++ configure
@@ -653,7 +653,7 @@
 echo $ac_n "checking version of Tcl/Tk""... $ac_c" 1>&6
 echo "configure:655: checking version of Tcl/Tk" >&5
 echo "$ac_t""$TCL_VERSION/$TK_VERSION" 1>&6
-TCL_VERSIONS_ALLOWED="7.5 7.6 8.0 8.1 8.2"
+TCL_VERSIONS_ALLOWED="7.5 7.6 8.0 8.1 8.2 8.3"
 if test -z "`echo $TCL_VERSIONS_ALLOWED | grep $TCL_VERSION`"; then
   echo
   echo TkDesk requires Tcl/Tk versions 7.5/4.1, 7.6/4.2., or 8.0.
@@ -661,7 +661,7 @@
   echo yet supported \(but hopefully will be soon\).
   exit 1
 fi
-TK_VERSIONS_ALLOWED="4.1 4.2 8.0 8.1 8.2"
+TK_VERSIONS_ALLOWED="4.1 4.2 8.0 8.1 8.2 8.3"
 if test -z "`echo $TK_VERSIONS_ALLOWED | grep $TK_VERSION`"; then
   echo
   echo TkDesk requires Tcl/Tk versions 7.5/4.1, 7.6/4.2, or 8.0.
@@ -681,8 +681,9 @@
   if test -z "$ITCLCONF_PATH" ; then
     ITCLCONF_PATH=$TCLCONF_PATH
   fi
-  if test -r $ITCLCONF_PATH/itclConfig.sh ; then
-    . $ITCLCONF_PATH/itclConfig.sh
+  if test -r $ITCLCONF_PATH/tcl/itcl3.2/pkgIndex.tcl ; then
+    ITCL_VERSION="32"
+    ITCL_MAJOR_VERSION=3
   else
     ITCL_VERSION="no"
     ITCL_MAJOR_VERSION=0
@@ -713,11 +714,14 @@
   NEED_BLT_LIB=lib_blt
   echo "$ac_t""./blt" 1>&6
 else
-  BLT_LIB_SPEC="-L$BLT_LIB_PATH -lBLT"
-  BLT_LIB_STATIC=$BLT_LIB_PATH/libBLT.a
+  if test -r $BLT_LIB_PATH/tcl/blt2.4/pkgIndex.tcl ; then
+    BLT_VERSION="24"
+  fi
+  BLT_LIB_SPEC="-L$BLT_LIB_PATH -lBLT${BLT_VERSION}"
+  BLT_LIB_STATIC=$BLT_LIB_PATH/libBLT${BLT_VERSION}.a
   NEED_BLT_LIB=
-  if test   ! -f $BLT_LIB_PATH/libBLT.a \
-         -a ! -f $BLT_LIB_PATH/libBLT.so
+  if test   ! -f $BLT_LIB_PATH/libBLT${BLT_VERSION}.a \
+         -a ! -f $BLT_LIB_PATH/libBLT${BLT_VERSION}.so
   then
     if test   ! -f $BLT_LIB_PATH/lib/libBLT.a \
            -a ! -f $BLT_LIB_PATH/lib/libBLT.so
@@ -742,8 +746,8 @@
   TCL_INCLUDE_PATH=$TCL_EXEC_PREFIX/include
   TK_INCLUDE_PATH=$TCL_INCLUDE_PATH
   NEED_ITCL_LIB=
-  # ITCL_LIB_SPEC already set in itclConfig.sh
-  ITCL_LIB_STATIC=${TCLCONF_PATH}/libitcl${ITCL_VERSION}.a
+  ITCL_LIB_SPEC="-L${ITCLCONF_PATH} -litcl${ITCL_VERSION}"
+  ITCL_LIB_STATIC=${ITCLCONF_PATH}/libitcl${ITCL_VERSION}.a
 else
   TCL_INCLUDE_PATH=$TCL_EXEC_PREFIX/include
   TK_INCLUDE_PATH=$TK_EXEC_PREFIX/include
