$NetBSD: patch-aa,v 1.1.1.1 2001/12/26 11:45:22 wennmach Exp $

Don't lndir to all of NetBSD src.

--- src/Makefile.orig	Sun Dec 23 18:23:56 2001
+++ src/Makefile	Sun Dec 23 18:30:59 2001
@@ -28,6 +28,9 @@
 # dir to lndir
 _BSDSRCDIR=	${PWD}/NetBSD
 
+# individual directories to link to
+_DIRS=etc bin/cat bin/cp bin/chmod bin/csh bin/date bin/df bin/echo bin/ed bin/expr bin/hostname bin/kill bin/ln bin/ls bin/mkdir bin/mv bin/ps bin/pwd bin/rm bin/sh bin/sleep bin/stty bin/sync bin/test dist/dhcp dist/ipf distrib/utils distrib/i386/floppies sbin/ifconfig sbin/init sbin/mount sbin/mount_ffs sbin/mount_kernfs sbin/mount_msdos sbin/umount sbin/ping sbin/route sbin/reboot sbin/shutdown usr.bin/basename usr.bin/id usr.bin/less usr.bin/logger usr.bin/sed usr.bin/tty usr.bin/uname usr.sbin/chown usr.sbin/chroot usr.sbin/dhcp usr.sbin/ipf usr.sbin/pppd usr.sbin/syslogd lib/libpcap sys/netinet sys/arch/i386/stand
+
 _FLOPPY_DIR=	${_BSDSRCDIR}/distrib/${ARCH}/floppies
 
 _SYS_DIR=	${BSDSRCDIR}/sys
@@ -120,10 +123,12 @@
 
 _lndir:
 	@ test -d ${_BSDSRCDIR} || mkdir -p ${_BSDSRCDIR}
-	@ echo lndir ${BSDSRCDIR} ${_BSDSRCDIR}
-	@ if [ ! -f ${_BSDSRCDIR}/.lndir_done ]; then \
-		lndir ${BSDSRCDIR} ${_BSDSRCDIR};\
-	  fi
+	for DIR in ${_DIRS} ; do \
+	  test -d ${_BSDSRCDIR}/$$DIR || mkdir -p ${_BSDSRCDIR}/$$DIR; \
+	  lndir ${BSDSRCDIR}/$$DIR ${_BSDSRCDIR}/$$DIR; \
+	done
+	(cd ${_BSDSRCDIR}/distrib; ln -s -f ${BSDSRCDIR}/distrib/Makefile.inc)
+	(cd ${_BSDSRCDIR}; ln -s -f ${BSDSRCDIR}/Makefile.inc)
 	@ touch ${_BSDSRCDIR}/.lndir_done
 
 _init_dir:
