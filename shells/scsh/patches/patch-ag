$NetBSD: patch-ag,v 1.2.2.1 2002/06/23 18:59:35 jlam Exp $

--- scsh/bsd/signals1.c.orig	Thu Sep 12 07:01:30 1996
+++ scsh/bsd/signals1.c
@@ -5,6 +5,10 @@
 /* Make sure our exports match up w/the implementation: */
 #include "../signals1.h"
 
+#if defined(__NetBSD__)
+#include <sys/param.h>
+#endif
+
 /* This table converts Unix signal numbers to S48/scsh interrupt numbers.
 ** If the signal doesn't have an interrupt number, the entry is -1.
 ** (Only asynchronous signals have interrupt numbers.)
@@ -45,10 +49,50 @@
 	scshint_winch,	/* SIGWINCH */
 	scshint_info,	/* SIGINFO */
 	scshint_usr1,	/* SIGUSR1 */
-	scshint_usr2	/* SIGUSR2 */
+	scshint_usr2,	/* SIGUSR2 */
+#if defined(__NetBSD__) && defined(__NetBSD_Version__) 
+#if (__NetBSD_Version__ >= 105290000) /* XXX Need to refine this */
+        scshint_pwr,    /* SIGPWR */
+        -1,	/* SIGRTMIN + 0 */
+        -1,	/* SIGRTMIN + 1 */
+        -1,	/* SIGRTMIN + 2 */
+        -1,	/* SIGRTMIN + 3 */
+        -1,	/* SIGRTMIN + 4 */
+        -1,	/* SIGRTMIN + 5 */
+        -1,	/* SIGRTMIN + 6 */
+        -1,	/* SIGRTMIN + 7 */
+        -1,	/* SIGRTMIN + 8 */
+        -1,	/* SIGRTMIN + 9 */
+        -1,	/* SIGRTMIN + 10 */
+        -1,	/* SIGRTMIN + 11 */
+        -1,	/* SIGRTMIN + 12 */
+        -1,	/* SIGRTMIN + 13 */
+        -1,	/* SIGRTMIN + 14 */
+        -1,	/* SIGRTMIN + 15 */
+        -1,	/* SIGRTMIN + 16 */
+        -1,	/* SIGRTMIN + 17 */
+        -1,	/* SIGRTMIN + 18 */
+        -1,	/* SIGRTMIN + 19 */
+        -1,	/* SIGRTMIN + 20 */
+        -1,	/* SIGRTMIN + 21 */
+        -1,	/* SIGRTMIN + 22 */
+        -1,	/* SIGRTMIN + 23 */
+        -1,	/* SIGRTMIN + 24 */
+        -1,	/* SIGRTMIN + 25 */
+        -1,	/* SIGRTMIN + 26 */
+        -1,	/* SIGRTMIN + 27 */
+        -1,	/* SIGRTMIN + 28 */
+        -1,	/* SIGRTMIN + 29 */
+        -1 	/* SIGRTMIN + 30 */
+#elif (__NetBSD_Version__ >= 103080000)
+        scshint_pwr    /* SIGPWR */
+#endif
+#endif
+
+
         };
 
-const int max_sig = 31; /* SIGUSR2 */
+const int max_sig = (sizeof(sig2int)/sizeof(int)) - 1;
 
 /*
 scshint_alarm
