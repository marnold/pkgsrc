$NetBSD: patch-aa,v 1.1.1.1 2001/07/19 04:36:07 cjones Exp $

--- parameters/ad.tcl.orig	Mon Apr 30 19:53:34 2001
+++ parameters/ad.tcl	Wed Jul 18 21:49:47 2001
@@ -1,3 +1,7 @@
+# Your DocumentRoot should be ${homedir}/${server}/www, as in nsd.tcl.
+set homedir "/usr/local/share/htdocs"
+set server [ns_info server]
+
 	# AOLserver reads these files when the server starts up and stores
 	# parameters in an in-memory hash table.  So you have to restart the
 	# server if you want to test a change made to this file.
@@ -187,7 +191,7 @@
 	ns_param UsersTableContainsConvertedUsersP 0
 
 	# Primarily for WimpyPoint, but may be useful to other modules
-	ns_param PathToACS ${homedir}/servers/${server}
+	ns_param PathToACS ${homedir}/${server}
 
 	# Where is the global directory for such things as file-not-found
 	# error messages
@@ -235,7 +239,7 @@
 
 	# if you have ImageMagick configured, try to
 	# producte thumbnails?
-	ns_param ProduceThumbnailsAutomaticallyP 0
+	ns_param ProduceThumbnailsAutomaticallyP 1
 	ns_param AcceptablePortraitMIMETypes "image/gif image/jpeg"
 
 	# stuff having to do with the physical computer on which
@@ -396,7 +400,7 @@
 	ns_param FileUploadingEnabledP 1
 
 	# this path does *not* contain a trailing "/"
-	ns_param FilePath ${homedir}/servers/foobar/
+	ns_param FilePath ${homedir}/foobar/
 
 	# Urgent messages
 	ns_param UrgentMessageEnabledP 0
@@ -836,7 +840,7 @@
 
 ns_section ns/server/${server}/acs/style
 
-	# where to find templates, typically ${homedir}/servers/${server}/templates
+	# where to find templates, typically ${homedir}/${server}/templates
 	# (note lack of trailing slash, just like the pageroot)
 	# you can override it with this config param
 	# ns_param TemplateRoot ""
@@ -871,7 +875,7 @@
 	# note that this address must be set up through your mail transfer
 	# agent to run a email enqueueing script.
 	# See doc/ticket.html for more info on configuring the ticket system.
-	# (from ${homedir}/servers/${server}/bin/queue-message.pl)
+	# (from ${homedir}/${server}/bin/queue-message.pl)
 	ns_param TicketReplyEmail support-ticket-robot@[ns_info hostname]
 
 	# The PicklistData specifies additional custom data fields you would like
@@ -1097,13 +1101,13 @@
 	ns_param LocalDomain [ns_info hostname]
 
 	# the directory that the ecommerce module is in
-	ns_param EcommerceDirectory ${homedir}/servers/${server}/www/ecommerce/
+	ns_param EcommerceDirectory ${homedir}/${server}/www/ecommerce/
 
 	# web path to the directory that the ecommerce user files are in
 	ns_param EcommercePath /ecommerce/
 
 	# path to Product data directories (where product files like images are kept)
-	ns_param EcommerceDataDirectory ${homedir}/servers/${server}/data/ecommerce/
+	ns_param EcommerceDataDirectory ${homedir}/${server}/data/ecommerce/
 
 	# This path goes on the end of the EcommerceDataDirectory
 	ns_param ProductDataDirectory product/
@@ -1224,7 +1228,7 @@
 	# ns_param PersontoNotify nerd1@[ns_info hostname]
 	# ns_param PersontoNotify nerd2@[ns_info hostname]
 	# location of the watchdog perl script
-	ns_param WatchDogParser ${homedir}/servers/${server}/bin/aolserver-errors.pl
+	ns_param WatchDogParser ${homedir}/${server}/bin/aolserver-errors.pl
 
 	# watchdog frequency in minutes
 	ns_param WatchDogFrequency 15
@@ -1251,7 +1255,7 @@
 ns_section ns/server/${server}/acs/download
 
 	# root directory of the downloadable files
-	ns_param DownloadRoot ${homedir}/servers/${server}/download/
+	ns_param DownloadRoot ${homedir}/${server}/download/
 
 
 ns_section ns/server/${server}/acs/wp
@@ -1265,7 +1269,7 @@
 	ns_param CommentApprovalPolicy open
 
 	# Path to the unzip program to use for bulk image uploading.
-	ns_param PathToUnzip /usr/bin/unzip
+	ns_param PathToUnzip @PREFIX@/bin/unzip
 
 	# Is bulk image uploading enabled?
 	ns_param AllowBulkUploadP 1
@@ -1276,7 +1280,7 @@
 	# all user  web content will be rooted  under  this directory.  This
 	# directory will be the root of  all the web content being published
 	# by the users of the system.
-	ns_param ContentRoot ${homedir}/servers/${server}/users/
+	ns_param ContentRoot ${homedir}/${server}/users/
 
 	# Maximum quota for a 'normal user' (a lesser mortal who  is not the
 	# site wide administrator) of the site in mega-bytes. For example, a
@@ -1344,7 +1348,7 @@
 
 	# Pairs of {email_addr_pattern pseudo-mime-type}
 	ns_param EmailTypes "{%@hotmail.com text/html} {%@aol.com text/aol-html}"
-	ns_param DailySpamDirectory ${homedir}/servers/${server}/spam
+	ns_param DailySpamDirectory ${homedir}/${server}/spam
 	ns_param RemovalBlurb "{-----\\nSent through http://[ns_info hostname]\\n\\n}"
 
 
@@ -1393,7 +1397,7 @@
 ns_section ns/server/${server}/acs/sdm
 
 	ns_param UrlStub /sdm
-	ns_param SoftwareRoot ${homedir}/servers/${server}/sdm-software
+	ns_param SoftwareRoot ${homedir}/${server}/sdm-software
 	ns_param SdmVersion 0.4
 	ns_param NotificationSenderEmail robot@[ns_info hostname]
 	ns_param SystemName "Software Development Manager"
@@ -1420,7 +1424,7 @@
 
 	#to be able to restart the aolserver from the admin page,
 	#INIFile must have the path and name of the config file.
-	#ie: ${homedir}/servers/aolserver/${server}.tcl
+	#ie: ${homedir}/aolserver/${server}.tcl
 	#To disable, leave INIFile blank
 
 ns_section ns/server/${server}/acs/restart
@@ -1447,9 +1451,9 @@
         ns_param PhotoSubDirectory "/photodb"
         ns_param PhotoDatabaseServiceName "Photo Database"
         ns_param ErrorPhotoPath "/graphics/photodb/error.jpg"
-        ns_param PhotoDataRoot "${homedir}/servers/${server}/data/photodb"
-        ns_param ImageMagickIdentifyLocation "/usr/bin/X11/identify"
-        ns_param ImageMagickConvertLocation "/usr/bin/X11/convert"
+        ns_param PhotoDataRoot "${homedir}/${server}/data/photodb"
+        ns_param ImageMagickIdentifyLocation "@PREFIX@/bin/identify"
+        ns_param ImageMagickConvertLocation "@PREFIX@/bin/convert"
 
 	# Local Variables:
 	# eval: (auto-save-mode 0)
