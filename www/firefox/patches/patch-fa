$NetBSD: patch-fa,v 1.1.2.2 2006/05/02 20:59:47 salo Exp $

--- embedding/components/commandhandler/src/nsBaseCommandController.h.orig	2006-04-28 12:43:57.000000000 +0200
+++ embedding/components/commandhandler/src/nsBaseCommandController.h
@@ -49,6 +49,8 @@
 #include "nsIControllerContext.h"
 #include "nsIControllerCommandTable.h"
 #include "nsIInterfaceRequestor.h"
+#include "nsIWeakReference.h"
+#include "nsIWeakReferenceUtils.h"
 
 // The base editor controller is used for both text widgets, 
 //   and all other text and html editing
@@ -79,7 +81,7 @@ public:
   
 private:
 
-   nsISupports *mCommandContext;
+   nsWeakPtr mCommandContext;
    
    // Our reference to the command manager
    nsCOMPtr<nsIControllerCommandTable> mCommandTable;     
