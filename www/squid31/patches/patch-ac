$NetBSD: patch-ac,v 1.1.1.1 2009/04/20 21:27:40 tron Exp $

--- configure.orig	2009-04-08 12:51:47.000000000 +0200
+++ configure
@@ -27447,6 +27447,7 @@ for ac_header in \
 	libc.h \
 	libgen.h \
 	limits.h \
+	machine/byte_swap.h \
 	malloc.h \
 	math.h \
 	memory.h \
@@ -27779,6 +27780,7 @@ for ac_header in \
 	netinet/ip_icmp.h \
 	netinet/ip_nat.h\
 	netinet/ipl.h \
+	net/pf/pfvar.h \
 	net/pfvar.h \
 	sys/mount.h\
 	resolv.h \
@@ -46608,9 +46610,9 @@ if test "$GCC" = "yes"; then
 	GCCVER=`$CC -v 2>&1 | awk '$2 ==  "version" {print $3}'`
 	case "$GCCVER" in
 	2.95.[123])
-		{ $as_echo "$as_me:$LINENO: Removing -O for gcc on $host with GCC $GCCVER" >&5
-$as_echo "$as_me: Removing -O for gcc on $host with GCC $GCCVER" >&6;}
-		CFLAGS="`echo $CFLAGS | sed -e 's/-O[0-9]*//'`"
+		{ $as_echo "$as_me:$LINENO: Making -O\[[2-9\]] to -O for gcc on $host with GCC $GCCVER" >&5
+$as_echo "$as_me: Making -O\[[2-9\]] to -O for gcc on $host with GCC $GCCVER" >&6;}
+		CFLAGS="`echo $CFLAGS | sed -e 's/-O[[0-9]]*/-O/'`"
 		;;
 	esac
 fi
@@ -47708,7 +47710,7 @@ if test "$PF_TRANSPARENT" ; then
     { $as_echo "$as_me:$LINENO: checking if PF header file is installed" >&5
 $as_echo_n "checking if PF header file is installed... " >&6; }
     # hold on to your hats...
-    if test "$ac_cv_header_net_pfvar_h" = "yes"; then
+    if test "$ac_cv_header_net_pfvar_h" = "yes" || test "$ac_cv_header_net_pf_pfvar_h" = "yes"; then
         PF_TRANSPARENT="yes"
         cat >>confdefs.h <<\_ACEOF
 #define PF_TRANSPARENT 1
