$NetBSD: patch-ad,v 1.1.1.1 2002/08/20 00:39:55 fredb Exp $

--- src/www-con.c.orig	Fri Dec  8 09:20:47 2000
+++ src/www-con.c
@@ -31,6 +31,7 @@
 
 #if defined(NETBSD) || defined(FreeBSD)
 #include <sys/filio.h>
+#include <sys/ioctl.h>
 #endif
 
 #ifndef FD_SETSIZE
@@ -225,8 +226,11 @@
 	}
 /* manage only non numeric adresses for IPV6 */
 /* RFC 2133 */
-/*	phost = gethostbyname2 (host,AF_INET6); */
+#if defined(NETBSD)
+	phost = gethostbyname2 (host,AF_INET6);
+#else
 	phost = getipnodebyname( host, AF_INET6, AI_DEFAULT, &err_num);
+#endif
 
 	if (phost) {			/* try IPV6 */
 #ifdef DEBUG_IPV6
@@ -270,9 +274,12 @@
 			if (cached4_host && (strcmp (cached4_host, host) == 0)){
 				memcpy(&sin4->sin_addr, cached4_phost_h_addr, cached4_phost_h_length);
 			} else {
-/*				phost = gethostbyname2 (host,AF_INET); */
-/*				phost = gethostbyname (host); */
+#if defined(NETBSD)
+				phost = gethostbyname2 (host,AF_INET);
+			     /* phost = gethostbyname (host); */
+#else
 				phost = getipnodebyname( host, AF_INET6, AI_DEFAULT, &err_num);
+#endif
 				if (!phost) {
 					fprintf (stderr, "Can't find internet node name `%s'.\n",host);
 					return IN_IPV_UNKNOWN;  /* Fail */
