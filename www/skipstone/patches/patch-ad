$NetBSD: patch-ad,v 1.2.2.1 2002/06/23 19:04:41 jlam Exp $

diff -ru ../Orig/skipstone-0.8.2/src/mozilla.cpp ./src/mozilla.cpp
--- ../Orig/skipstone-0.8.2/src/mozilla.cpp	Sat May 11 05:20:45 2002
+++ ./src/mozilla.cpp	Sun May 26 20:35:02 2002
@@ -3,6 +3,7 @@
  *							*
  *  released under the GPL				*/
 
+#include <sys/param.h>
 #include <gtk/gtk.h>
 #include <sys/types.h>
 
@@ -277,7 +278,11 @@
      	nsCOMPtr<nsIWebBrowserPersist> persist(do_QueryInterface(wb));
      	if (persist)  {
 	     	nsCOMPtr<nsILocalFile> file;
+#if 0
 	     	NS_NewLocalFile(FullPath, PR_TRUE, getter_AddRefs(file));
+#else
+	     	NS_NewNativeLocalFile(nsDependentCString(FullPath), PR_TRUE, getter_AddRefs(file));
+#endif
 	     	if (!file) D_RETURN;
        		persist->SaveURI(linkURI, nsnull, file);
 	}
@@ -402,10 +407,18 @@
 				     	relative_path[i] = '\0';
 				     	break;
 				}
+#if 0
 		     	NS_NewLocalFile(relative_path, PR_TRUE, getter_AddRefs(relative));
+#else
+		     	NS_NewNativeLocalFile(nsDependentCString(relative_path), PR_TRUE, getter_AddRefs(relative));
+#endif
 		       
 		} 
+#if 0
 	     	NS_NewLocalFile(file_name,PR_TRUE,getter_AddRefs(file));
+#else
+	     	NS_NewNativeLocalFile(nsDependentCString(file_name),PR_TRUE,getter_AddRefs(file));
+#endif
 //#ifdef CVS_MOZILLA
 	     	if (file) persist->SaveDocument(domDoc,file,relative, nsnull, 0, 0);
 //#else	     
