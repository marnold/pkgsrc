$NetBSD: patch-ac,v 1.1.1.1 2006/05/21 22:21:10 ben Exp $

--- src/hostapi/oss/pa_unix_oss.c.orig	2006-05-17 01:02:24.000000000 -0700
+++ src/hostapi/oss/pa_unix_oss.c
@@ -42,7 +42,9 @@
 #include <sys/ioctl.h>
 #include <unistd.h>
 #include <pthread.h>
+#if !defined(__NetBSD__)
 #include <alloca.h>
+#endif
 #include <malloc.h>
 #include <assert.h>
 #include <errno.h>
@@ -58,6 +60,9 @@
 #elif defined __linux__
 # include <linux/soundcard.h>
 # define DEVICE_NAME_BASE            "/dev/dsp"
+#elif defined(__NetBSD__)
+# include <soundcard.h>
+# define DEVICE_NAME_BASE            "/dev/audio"
 #else
 # include <machine/soundcard.h> /* JH20010905 */
 # define DEVICE_NAME_BASE            "/dev/audio"
@@ -1916,8 +1921,10 @@ static signed long GetStreamWriteAvailab
     PaOssStream *stream = (PaOssStream*)s;
     int delay = 0;
 
+#if !defined(__NetBSD__)
     if( ioctl( stream->playback->fd, SNDCTL_DSP_GETODELAY, &delay ) < 0 )
         return paUnanticipatedHostError;
+#endif
     
     return (PaOssStreamComponent_BufferSize( stream->playback ) - delay) / PaOssStreamComponent_FrameSize( stream->playback );
 }
