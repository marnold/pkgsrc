# $NetBSD: Makefile.common,v 1.16.2.1 2005/05/06 03:57:03 snj Exp $

DISTNAME=	libao-0.8.6
CATEGORIES=	audio devel
MASTER_SITES=	http://downloads.xiph.org/releases/ao/

MAINTAINER=	lukem@NetBSD.org
HOMEPAGE=	http://www.xiph.org/ao/
COMMENT=	Cross-platform audio library

DISTINFO_FILE=	${.CURDIR}/../../audio/libao/distinfo
PATCHDIR=	${.CURDIR}/../../audio/libao/patches

GNU_CONFIGURE=		yes
USE_BUILDLINK3=		yes
USE_GNU_TOOLS+=		make
USE_LIBTOOL=		yes

PKGCONFIG_OVERRIDE+=	ao.pc.in

.include "../../mk/bsd.prefs.mk"

.if ${OPSYS} == "FreeBSD" || ${OPSYS} == "DragonFly"
PLIST_SUBST+=		LIBOSS=""
PLIST_SUBST+=		LIBSUN="@comment "
.elif ${OPSYS} == "SunOS"
PLIST_SUBST+=		LIBOSS="@comment "
PLIST_SUBST+=		LIBSUN=""
.elif ${OPSYS} == "Linux" && empty(MACHINE_PLATFORM:MLinux-*-sparc*)
PLIST_SUBST+=		LIBOSS=""
PLIST_SUBST+=		LIBSUN="@comment "
.elif ${OPSYS} == "Interix"
PLIST_SUBST+=		LIBOSS="@comment "
PLIST_SUBST+=		LIBSUN="@comment "
.elif ${OPSYS} == "Darwin"
PLIST_SUBST+=		LIBOSS="@comment "
PLIST_SUBST+=		LIBSUN="@comment "
.else
PLIST_SUBST+=		LIBOSS=""
PLIST_SUBST+=		LIBSUN=""
.endif

CONFIGURE_ARGS+=	--disable-alsa
CONFIGURE_ARGS+=	--disable-alsa09
CONFIGURE_ARGS+=	--disable-arts
CONFIGURE_ARGS+=	--disable-esd

.include "../../devel/pkgconfig/buildlink3.mk"
.include "../../mk/dlopen.buildlink3.mk"
.include "../../mk/ossaudio.buildlink3.mk"
