$NetBSD: patch-ak,v 1.1.1.1 2008/03/16 09:26:46 bjs Exp $

--- libjack/unlock.c.orig	2008-03-04 07:20:10.000000000 -0500
+++ libjack/unlock.c
@@ -48,6 +48,7 @@ static char* library_roots[] = {
 	"/usr/X11R6/lib",
 	"/opt/lib",       /* solaris-y */   
 	"/opt/local/lib", /* common on OS X */
+	"@PREFIX@",	  /* pkgsrc prefix */
 	NULL
 };
 
@@ -63,7 +64,7 @@ cleanup_mlock ()
 	int whoknows;
 	int looks_like_library;
 
-	snprintf (path, sizeof(path), "/proc/%d/maps", getpid());
+	snprintf (path, sizeof(path), "@JACKD_PROCFS_PATH@/%d/maps", getpid());
 
 	if ((map = fopen (path, "r")) == NULL) {
 		jack_error ("can't open map file");
