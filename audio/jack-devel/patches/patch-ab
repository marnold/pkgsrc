$NetBSD: patch-ab,v 1.1.1.1 2008/03/16 09:26:46 bjs Exp $

--- configure.orig	2008-03-15 02:20:31.000000000 -0400
+++ configure
@@ -19793,7 +19793,7 @@ case "${host_os}" in
     # barrier code, this may be fixed in 5.3, stay tuned.
     USE_BARRIER="no"
     ;;
-  openbsd*)
+  openbsd*|netbsd*)
     # pthread_barrier* not implemented
     USE_BARRIER="no"
     # need small realtime stack
@@ -23039,8 +23039,7 @@ fi
 
 JACK_CORE_CFLAGS="-I\$(top_srcdir)/config -I\$(top_srcdir) \
 -I\$(top_srcdir) -D_REENTRANT -D_POSIX_PTHREAD_SEMANTICS -Wall -g"
-JACK_OPT_CFLAGS="$JACK_CORE_CFLAGS -march=pentium2 -mcpu=pentium4 -O3 \
--ffast-math -funroll-loops -fprefetch-loop-arrays"
+JACK_OPT_CFLAGS="$JACK_CORE_CFLAGS"
 JACK_CFLAGS="$JACK_CORE_CFLAGS $CFLAGS"
 
 
@@ -23122,7 +23121,7 @@ rm -f core conftest.err conftest.$ac_obj
     fi
 
 
-    JACK_OPT_CFLAGS="-D_REENTRANT -O2 -mcpu=7400 $ALTIVEC_OPT_FLAGS_FLAGS -mhard-float -mpowerpc-gfxopt"
+    JACK_OPT_CFLAGS="-D_REENTRANT -O2 $ALTIVEC_OPT_FLAGS_FLAGS -mhard-float -mpowerpc-gfxopt"
 
 elif echo $target_cpu | egrep '(i.86|x86_64)' >/dev/null; then
 
@@ -23294,14 +23293,14 @@ cat >>confdefs.h <<\_ACEOF
 #define x86 1
 _ACEOF
 
-    COMMON_X86_OPT_FLAGS="-DREENTRANT -O3 -fomit-frame-pointer -ffast-math -funroll-loops"
+    COMMON_X86_OPT_FLAGS="-DREENTRANT"
 
     if test "$target_cpu" = "i586"; then
 	JACK_OPT_CFLAGS="-march=i586 "
     elif test "$target_cpu" = "i686"; then
 	JACK_OPT_CFLAGS="-march=i686"
     elif test "$target_cpu" = "x86_64"; then
-	JACK_OPT_CFLAGS="-march=k8"
+	JACK_OPT_CFLAGS=""
     else
 	:
     fi
